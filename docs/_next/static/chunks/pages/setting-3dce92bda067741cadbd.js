(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[552],{8670:function(e,r,t){"use strict";t.d(r,{o:function(){return c}});var n=t(67294),o=t(29163),i=t(94184),s=t.n(i),a=t(85893);var c=n.memo((0,o.ZP)((function(e){var r=e.className,t=e.children;return(0,a.jsx)("div",{className:s()(r,"mcard"),children:t})})).withConfig({displayName:"MCard",componentId:"sc-157sg53-0"})(["padding:1.71rem !important;box-shadow:0 0.71rem 1.71rem 0 rgba(0,0,0,0.06) !important;border-radius:1.14rem !important;border:0.07rem solid #EEEEEE !important;margin-top:2.21rem;.title{font-size:1.3rem !important;font-weight:600;color:var(--main-color);padding-bottom:1.14rem;.cru-fo{margin-right:0.8rem;}}.text{font-size:1rem;color:var(--secend-color);line-height:1.57rem;}.icon{margin-left:1rem;font-size:1.428571rem;position:relative;top:3px;cursor:pointer;}.bold-text{color:var(--main-color);}a{text-decoration:underline;line-height:1.2rem;cursor:pointer;}.btns{margin-top:1.7rem;button:first-child{margin-right:1rem;}}"]))},17082:function(e,r,t){"use strict";t.d(r,{vZ:function(){return b},hC:function(){return g},MH:function(){return x}});var n=t(92809),o=t(30266),i=t(80318),s=t(809),a=t.n(s),c=t(67294),l=t(58971),u=t.n(l),d=t(65058);function p(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function f(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?p(Object(t),!0).forEach((function(r){(0,n.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):p(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var m=t(21994).Cypher,h=new m(8),b=function(e){return new Promise((function(r,t){var n=new FileReader;n.onload=function(){n.result&&r(n.result)},n.onerror=t,n.readAsArrayBuffer(e)}))};function g(e){try{var r=e&&e.trim();if(r){var t=r.split(" ");if(1===t.length&&t[0]){var n=t[0],o=window.atob(n),i=h.phraseFromSecret(o);if(i&&i.split(" ").length>=4)return{secret:n,seeds:i}}else if(t.length>=4){var s=h.secretFromPhrase(r);if(s&&s.split("-").length>=4)return{secret:window.btoa(s),seeds:r}}}return null}catch(a){return null}}function x(){var e=(0,c.useState)({}),r=e[0],t=e[1],n=(0,d.O)(),s=(0,i.Z)(n,2),l=s[0],p=s[1];(0,c.useEffect)((function(){var e=u().get("user:crypto");e&&t(e),p(!0)}),[]);var h=(0,c.useCallback)((function(e){t(e),u().set("user:crypto",e)}),[]),b=(0,c.useCallback)((0,o.Z)(a().mark((function e(){var r,t,n,o,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new m(8),t=r.genMnemonics(),n=t.secret,o=t.mnemonics,i={secret:window.btoa(n),seeds:o},h(i),e.abrupt("return",i);case 5:case"end":return e.stop()}}),e)}))),[]);return(0,c.useMemo)((function(){return f(f({},r),{},{generate:b,set:h,init:l})}),[r,h,l,b])}},57288:function(e,r,t){"use strict";t.d(r,{F:function(){return o}});var n=t(67294);function o(e){var r=(0,n.useState)(e),t=r[0],o=r[1],i=(0,n.useState)({safe:!0})[0];(0,n.useEffect)((function(){return i.safe=!0,function(){i.safe=!1}}));return[t,function(e){i.safe&&o(e)}]}},39436:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return q}});var n=t(92809),o=t(30266),i=t(83789),s=t(80318),a=t(809),c=t.n(a),l=t(94184),u=t.n(l),d=t(22751),p=t(93162),f=t.n(p),m=t(11163),h=t(67294),b=t(23499),g=t(18538),x=t(35766),v=t(21004),y=t(49147),j=t(27416),w=t(29163),O=t(60954),E=t(8670),N=t(10219),k=t(345),C=t(60416),P=t(17082),S=t(85893),Z=["alert","onSuccess","toggleOpen"];function F(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function A(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?F(Object(t),!0).forEach((function(r){(0,n.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):F(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var _=h.memo((0,w.ZP)((function(e){var r=e.alert,t=e.onSuccess,n=e.toggleOpen,o=(0,N.Z)(e,Z),i=(0,h.useState)(""),s=i[0],a=i[1],c=(0,h.useCallback)((function(e,r){var t=r.value;a(t)}),[]),l=(0,h.useCallback)((function(){var e=(0,P.hC)(s);e?(t(e),n(!1)):r.error("Please check input value")}),[s,r]),u=(0,h.useCallback)((function(){a(""),n(!1)}),[]);return(0,S.jsxs)(k.Z,A(A({closeIcon:(0,S.jsx)("span",{className:"close icon cru-fo-x"}),onClose:u},o),{},{children:[(0,S.jsx)(k.Z.Header,{content:"Input a new key"}),(0,S.jsxs)(k.Z.Content,{children:[(0,S.jsx)(C.Z,{fluid:!0,onChange:c}),(0,S.jsxs)("div",{className:"btns",children:[(0,S.jsx)(O.Z,{content:"Input",onClick:l}),(0,S.jsx)(O.Z,{content:"Cancel",onClick:function(){return n(!1)}})]})]})]}))})).withConfig({displayName:"ModalNewKey",componentId:"sc-crca66-0"})(["width:34.3rem !important;.header{height:3.93rem;font-size:1.3rem !important;padding:0 1.14rem !important;font-weight:600 !important;line-height:3.93rem !important;}.close.icon{top:0.5rem;right:0.6rem;color:#666666;}.content{padding:1rem !important;input{border:0.07rem solid #CCCCCC !important;border-radius:0.57rem !important;}.btns{padding-top:2.3rem;button{width:calc(50% - 0.5rem) !important;margin:unset;}button:first-child{margin-right:1rem;}}}"])),I=t(86316),D=t(12752),T=t(75282),z=t(20478),M=t(34111),U=t(13711),H=t(57288),B=t(65058),R=t(45129),Y=t(23638),L=t(93664);function G(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function J(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?G(Object(t),!0).forEach((function(r){(0,n.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):G(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function K(e,r){var t="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=function(e,r){if(!e)return;if("string"===typeof e)return V(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return V(e,r)}(e))||r&&e&&"number"===typeof e.length){t&&(e=t);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){function r(r){return e.apply(this,arguments)}return r.toString=function(){return e.toString()},r}((function(e){throw e})),f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,a=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return s=e.done,e},e:function(e){function r(r){return e.apply(this,arguments)}return r.toString=function(){return e.toString()},r}((function(e){a=!0,i=e})),f:function(){try{s||null==t.return||t.return()}finally{if(a)throw i}}}}function V(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}var X=(0,w.ZP)(g.Z).withConfig({displayName:"setting__BindTypeDropdown",componentId:"sc-1rkrrxr-0"})(["&.ui.dropdown{width:100px !important;min-width:unset !important;border-radius:8px !important;border:1px solid #999999 !important;box-shadow:unset !important;margin-right:8px !important;line-height:40px;height:40px;padding:0 30px 0 14px;.icon{position:absolute;right:11px;top:10px;}.text{font-size:14px;font-weight:500 !important;color:var(--main-color) !important;font-family:OpenSans-Medium sans-serif !important;}.menu{background:#FFFFFF;box-shadow:0 0.57rem 1.43rem 0 rgba(0,0,0,0.1) !important;border-radius:0.57rem !important;border:1px solid #EEEEEE !important;padding:unset !important;top:100%;.item{padding:14px 11px !important;border-radius:unset !important;border-top:1px solid #EEEEEE;font-weight:500;color:var(--main-color) !important;font-family:OpenSans-Medium sans-serif;&:active{background-color:#EEEEEE;}}.item:first-child{border-top:unset !important;}}}"]),$=["eth","polygon","bsc"],W={eth:{value:"eth",text:"ETH"},polygon:{value:"polygon",text:"Polygon"},bsc:{value:"bsc",text:"BSC"}},Q={0:"ETH",1:"BSC",2:"Polygon"};var q=h.memo((0,w.ZP)((function(e){var r=e.className,t=(0,b.$)().t,n=(0,P.MH)(),a=(0,m.useRouter)(),l=(0,h.useContext)(D.Il),p=l.alert,g=l.api,w=l.loading,N=(0,B.O)(!1),k=(0,s.Z)(N,2),C=k[0],Z=k[1],F=(0,B.O)(),A=(0,s.Z)(F,2),G=A[0],V=A[1];(0,h.useEffect)((function(){n.init&&!n.secret&&V(!0)}),[n]);var q=(0,U.S)(),ee=q.user,re=q.isPremiumUser,te=(0,z.V)(),ne=(0,h.useMemo)((function(){return re?"Premium User":"Trial User"}),[ee,re]),oe="crust"===ee.wallet,ie=(0,Y.Yg)(),se=(0,h.useRef)(null),ae=(0,h.useCallback)((function(){se.current&&se.current.click()}),[se]),ce=(0,h.useCallback)((function(e){try{var r=new FileReader,o=e.target.files;if(!o)return;if(r.readAsText(o[0],"UTF-8"),!/(.json)$/i.test(e.target.value))return p.error(t("File error"));r.onload=function(e){var r,o=JSON.parse(null===(r=e.target)||void 0===r?void 0:r.result),s={files:[]};if(Array.isArray(o))s.files=o;else{if(!o.files||!Array.isArray(o.files))return p.error(t("File content error"));s.secret=o.secret,s.files=o.files}if(n.secret&&s.secret&&s.secret!==n.secret)return p.error("Two secrets were found, and they are different.");if(s.secret){var a=(0,P.hC)(s.secret);a&&n.set(a)}var c,l=[],u={},d=K(s.files);try{for(d.s();!(c=d.n()).done;){var f=c.value;f.Hash&&f.Name&&f.UpEndpoint&&f.PinEndpoint&&(l.push(f),u[f.Hash]=!0)}}catch(h){d.e(h)}finally{d.f()}var m=ie.files.filter((function(e){return!u[e.Hash]}));ie.setFiles([].concat(l,(0,i.Z)(m))),p.alert({msg:t("Import Success"),type:"success"})}}catch(e){p.alert({msg:t("File content error"),type:"error"})}}),[ie,n.set,p,t]),le=(0,h.useCallback)((function(){var e={files:ie.files,secret:n.secret},r=new Blob([JSON.stringify(e)],{type:"application/json; charset=utf-8"});f().saveAs(r,"backup.json")}),[ie,n]),ue=(0,M.X)((function(){return(0,R.w8)(ee.account)}),[ee.account,re]),de=(0,s.Z)(ue,2),pe=de[0],fe=de[1],me=pe||[],he=(0,H.F)(""),be=(0,s.Z)(he,2),ge=be[0],xe=be[1],ve=(0,H.F)(""),ye=(0,s.Z)(ve,2),je=ye[0],we=ye[1],Oe=!re||!!je,Ee=(0,h.useMemo)((function(){return $.map((function(e){return W[e]}))}),[]),Ne=(0,h.useState)($[0]),ke=Ne[0],Ce=Ne[1],Pe=(0,h.useCallback)((function(e,r){var t=r.value;Ce(t)}),[]),Se=function(){var e=(0,o.Z)(c().mark((function e(){var r,t;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(re){e.next=2;break}return e.abrupt("return");case 2:if(ge){e.next=4;break}return e.abrupt("return");case 4:return e.prev=4,w.show(),g.setSigner(J({},ee.crust.wallet.signer)),r=g.tx.system.remark(JSON.stringify({scope:"crustFiles",env:T.g6,action:"bindExternalAddress",externalAddressType:ke,externalAddress:ge})),e.next=10,(0,L.iQ)(r,ee.account);case 10:g.setSigner(void 0),t=1;case 12:if(!(t<=3)){e.next=23;break}return e.next=15,(0,L._v)(3e3);case 15:return e.next=17,fe();case 17:if(!e.sent){e.next=20;break}return e.abrupt("break",23);case 20:t++,e.next=12;break;case 23:w.hide(),e.next=30;break;case 26:e.prev=26,e.t0=e.catch(4),w.hide(),p.error("Network Error");case 30:case"end":return e.stop()}}),e,null,[[4,26]])})));return function(){return e.apply(this,arguments)}}();return(0,S.jsxs)(I.Z,{path:"/setting",className:r,children:[(0,S.jsx)("input",{onChange:ce,ref:se,style:{display:"none"},type:"file"}),C&&(0,S.jsx)(_,{alert:p,size:"tiny",open:!0,toggleOpen:Z,onSuccess:n.set}),(0,S.jsxs)(x.Z,{basic:!0,className:"mcard",children:[(0,S.jsx)("div",{className:"title font-sans-semibold",children:t("User Profile")}),(0,S.jsxs)("div",{className:"text font-sans-regular",children:["".concat(t("Web3 Identity Logged-in:")," "),(0,S.jsx)("span",{className:"bold-text font-sans-semibold",children:ee.account})]}),(0,S.jsxs)("div",{className:"text font-sans-regular",children:["".concat(t("Logged-in Wallet:")," "),(0,S.jsx)("span",{className:"bold-text font-sans-semibold",children:Y.w3[ee.wallet]})]}),oe&&ee.nickName&&(0,S.jsxs)("div",{className:"text font-sans-regular",children:["".concat(t("Nick Name:")," "),(0,S.jsx)("span",{className:"bold-text font-sans-semibold",children:ee.nickName})]}),(0,S.jsxs)("div",{className:"text font-sans-regular",children:["".concat(t("User Type:")," "),(0,S.jsx)("span",{className:"bold-text font-sans-semibold",children:ne})," ",!re&&(0,S.jsx)("a",{onClick:function(){return a.push("/user")},rel:"noreferrer",children:"Get Premium"})]})]}),(0,S.jsxs)(x.Z,{basic:!0,className:"mcard",children:[(0,S.jsx)("div",{className:"title font-sans-semibold",children:t("User Data Management")}),(0,S.jsxs)("div",{className:"text font-sans-regular",children:["".concat(t("Your user data (including three File Lists and one File Encryption Key) are cached on your local devices. If you want to migrate your user data to a new device, use Export & Import function.")," "),(0,S.jsx)("span",{style:{color:"#f47e6b"},children:"Attention Please! If you want to switch device or explorer, please follow the following steps: 1) Export your user data from old device/explorer. 2) Log in to Crust Files in your new device/explorer. 3) Import the user data. 4) Enjoy Crust Files!"})]}),(0,S.jsxs)(v.Z,{children:[(0,S.jsx)(y.Z,{active:G,onClick:function(){return V()},children:(0,S.jsxs)("div",{className:"title font-sans-semibold",children:[t("File Encryption"),(0,S.jsx)("span",{className:u()("icon",G?"cru-fo-chevron-up":"cru-fo-chevron-down")})]})}),(0,S.jsxs)(j.Z,{active:G,className:"no-padding",children:[(0,S.jsxs)("div",{className:"text font-sans-regular",children:["".concat(t("Your File Encryption Key:")," "),n.secret&&(0,S.jsxs)("span",{className:"bold-text font-sans-semibold",children:[n.secret,(0,S.jsx)("span",{className:"icon cru-fo-copy",onClick:function(){return te(n.secret)}})]}),!n.secret&&(0,S.jsx)("a",{onClick:n.generate,children:"Generate a New"})]}),n.seeds&&(0,S.jsxs)("div",{className:"text font-sans-regular",children:["".concat(t("Seed Phrase:")," "),(0,S.jsx)("span",{className:"bold-text font-sans-semibold",children:n.seeds})]})]})]}),(0,S.jsxs)("div",{className:"btns",children:[(0,S.jsx)(O.Z,{content:t("Export"),onClick:le}),(0,S.jsx)(O.Z,{content:t("Import"),onClick:ae})]})]}),(0,S.jsxs)(E.o,{children:[(0,S.jsx)("div",{className:"title font-sans-semibold",children:t("Bind AirDrop Addresses")}),(0,S.jsxs)("div",{className:"text font-sans-regular",children:["Bind your addresses from multi blockchain platforms for potential airdrops. You can submit amandments when you have updates on your addresses.",(0,S.jsx)("br",{}),(0,S.jsx)("br",{}),me.map((function(e,r){return(0,S.jsxs)("div",{children:["Your binded ",Q[e.chain_type]," address: ",(0,S.jsx)("span",{className:"bold-text font-sans-semibold",children:e.address})]},"old_ex_".concat(r))})),(0,S.jsx)("br",{})]}),(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(X,{selection:!0,icon:(0,S.jsx)("span",{className:"icon cru-fo cru-fo-chevron-down"}),defaultValue:$[0],options:Ee,onChange:Pe}),(0,S.jsx)("input",{disabled:!re,className:"input-eth",spellCheck:"false",value:ge,onChange:function(e){xe(e.target.value);var r=(0,d.isValidAddress)(e.target.value);we(r?"":"Check Input")}}),je&&(0,S.jsx)("span",{className:"input-EthError",children:je}),(0,S.jsx)("br",{}),(0,S.jsx)(O.Z,{disabled:Oe,className:"btn",style:{width:514,height:40},onClick:Se,children:"Submit"}),!re&&(0,S.jsx)("span",{className:"submit-tip",children:"Get Premium User to bind your ETH address."})]})]})]})})).withConfig({displayName:"setting",componentId:"sc-1rkrrxr-1"})([".pusl_center_flex_content{min-width:60rem;}.mcard{padding:1.71rem !important;box-shadow:0 0.71rem 1.71rem 0 rgba(0,0,0,0.06) !important;border-radius:1.14rem !important;border:0.07rem solid #EEEEEE !important;margin-top:2.21rem;.title{font-size:1.3rem !important;font-weight:600;color:var(--main-color);padding-bottom:1.14rem;.cru-fo{margin-right:0.8rem;}}.text{font-size:1rem;color:var(--secend-color);line-height:1.57rem;}.icon{margin-left:1rem;font-size:1.428571rem;position:relative;top:3px;cursor:pointer;}.bold-text{color:var(--main-color);}a{text-decoration:underline;line-height:1.2rem;cursor:pointer;}.btns{margin-top:1.7rem;button:first-child{margin-right:1rem;}}}.input-eth{vertical-align:top;display:inline-block;min-width:406px;margin-bottom:12px;height:40px;line-height:40px;border:1px solid #999999;font-family:OpenSans-Regular;outline:unset;border-radius:8px;padding-left:16px;padding-right:16px;font-size:10px;&::placeholder{color:#999999;}}.input-EthError{font-size:10px;color:#F37565;margin-left:12px;}.submit-tip{margin-left:12px;font-size:10px;color:var(--secend-color);}"]))},63782:function(e,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/setting",function(){return t(39436)}])},27790:function(){},6567:function(){}},function(e){e.O(0,[729,914,991,441,774,888,179],(function(){return r=63782,e(e.s=r);var r}));var r=e.O();_N_E=r}]);