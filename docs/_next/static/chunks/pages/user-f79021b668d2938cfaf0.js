(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[235],{8670:function(n,e,t){"use strict";t.d(e,{o:function(){return m}});var i,r=t(52209),s=t(67294),a=t(29163),o=t(94184),c=t.n(o),l=t(85893);var m=s.memo((0,a.ZP)((function(n){var e=n.className,t=n.children;return(0,l.jsx)("div",{className:c()(e,"mcard"),children:t})}))(i||(i=(0,r.Z)(["\n    padding: 1.71rem !important;\n    box-shadow: 0 0.71rem 1.71rem 0 rgba(0, 0, 0, 0.06) !important;\n    border-radius: 1.14rem !important;\n    border: 0.07rem solid #EEEEEE !important;\n    margin: 2.21rem 2.29rem 0 2.39rem !important;\n  \n    .title {\n      font-size: 1.3rem !important;\n      font-weight: 600;\n      color: var(--main-color);\n      padding-bottom: 1.14rem;\n      .cru-fo {\n        margin-right: 0.8rem;\n      }\n    }\n\n    .text {\n      font-size: 1rem;\n      color: var(--secend-color);\n      line-height: 1.57rem;\n    }\n    .icon {\n      margin-left: 1rem;\n      font-size: 1.428571rem;\n      position: relative;\n      top: 3px;\n      cursor: pointer;\n    }\n    .bold-text {\n      color: var(--main-color);\n    }\n    \n    a {\n      text-decoration: underline;\n      line-height: 1.2rem;\n      cursor: pointer;\n    }\n\n    .btns {\n      margin-top: 1.7rem;\n      button:first-child {\n        margin-right: 1rem;\n      }\n    }\n"]))))},34111:function(n,e,t){"use strict";t.d(e,{X:function(){return r}});var i=t(67294);function r(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],t=(0,i.useState)(),r=t[0],s=t[1];(0,i.useEffect)((function(){a()}),e);var a=function(){e.length&&e.some((function(n){return!n}))||n().then(s).catch(console.error)};return[r,a]}},76435:function(n,e,t){"use strict";t.r(e),t.d(e,{default:function(){return S}});var i=t(52209),r=t(80318),s=t(96486),a=t.n(s),o=t(67294),c=t(35766),l=t(29163),m=t(60954),d=t(8670),u=t(60649),p=t(43913),h=t(75282),f=t(92809),x=t(12752),g=t(99056),v=t(96705);function b(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,i)}return t}function j(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?b(Object(t),!0).forEach((function(e){(0,f.Z)(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):b(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}var N,w=t(34111),y=t(45129),k=t(85893);var S=o.memo((0,l.ZP)((function(n){var e=n.className,t=(0,v.WY)(),i="crust"===t.wallet,s=(0,o.useState)(),l=s[0],f=s[1],b=(0,o.useState)(),N=b[0],S=b[1],O=(0,o.useMemo)((function(){return a().debounce((function(n){var e=n.target.value;f(""),S(""),e&&(0,y.lK)(e).then((function(n){n!==t.account?S(n):f("It can't be your own")})).catch((function(n){return f("Not found")}))}),300)}),[t.account]),E=(0,o.useState)(),P=E[0],_=E[1],C=(0,w.X)((function(){return(0,y.SJ)().then(g.vr)})),Z=(0,r.Z)(C,1)[0],z=(0,w.X)((function(){return(0,y.Ow)().then(g.vr)})),R=(0,r.Z)(z,1)[0],D=(0,w.X)((function(){return(0,y.Fl)()})),U=((0,r.Z)(D,1)[0],(0,w.X)((function(){return(0,y.Y1)(t.account)}),[t.account])),F=(0,r.Z)(U,2),I=F[0],M=F[1],X=I&&I.deposit&&I.deposit.id,Y=i&&!X,B=i&&X,W=i&&(t.member&&1===t.member.member_state||X),A=(0,w.X)((function(){return(0,y.Pk)()})),L=(0,r.Z)(A,1)[0];(0,o.useEffect)((function(){if(N){if(!R)return;_(R)}else{if(!Z)return;_(Z)}}),[Z,R,N]);var T=function(n,e,t){var i=(0,x.qD)(),r=i.api,s=i.alert,a=i.loading,c=(0,v.WY)(),l=(0,o.useState)(!1),m=l[0],d=l[1],u=(0,o.useState)(!1),p=u[0],f=u[1];return(0,o.useEffect)((function(){d(!1),c.account&&"crust"===c.wallet&&n&&e&&r&&c.crust.wallet&&d(!0)}),[r,c,n]),{start:function(){if(m){f(!1),a.show();var i=j(j({},c.crust.wallet.signer),{},{signPayload:function(n){return console.info("payload:",n),c.crust.wallet.signer.signPayload(n)}});r.setSigner(i);var o=(0,g.xM)(e).toString();console.info("deposit:",n,e,o);var l=r.tx.balances.transfer(n,o),d=r.tx.system.remark(JSON.stringify({scope:"crustFiles",env:h.g6,action:"deposit",share_from:t}));r.tx.utility.batchAll([l,d]).signAndSend(c.account,{nonce:-1,tip:0},(function(n){r.setSigner(void 0),n.status.isInBlock&&(a.hide(),f(!0))})).catch((function(n){"string"===typeof n?s.error(n):console.error(n),a.hide()}))}},ready:m,finish:p}}(L,P,N);(0,o.useEffect)((function(){M()}),[T.finish]);var J=function(){var n=(0,x.qD)(),e=n.api,t=n.alert,i=n.loading,r=(0,v.WY)(),s=(0,o.useState)(!1),a=s[0],c=s[1],l=(0,o.useState)(!1),m=l[0],d=l[1];return(0,o.useEffect)((function(){c(!1),r.account&&"crust"===r.wallet&&e&&r.crust.wallet&&c(!0)}),[e,r]),{start:function(){if(a){i.show(),d(!1);var n=j(j({},r.crust.wallet.signer),{},{signPayload:function(n){return console.info("payload:",n),r.crust.wallet.signer.signPayload(n)}});e.setSigner(n),e.tx.system.remark(JSON.stringify({scope:"crustFiles",env:h.g6,action:"claimDeposit"})).signAndSend(r.account,{nonce:-1,tip:0},(function(n){e.setSigner(void 0),n.status.isInBlock&&(i.hide(),d(!0))})).catch((function(n){"string"===typeof n?t.error(n):console.error(n),i.hide()}))}},ready:a,finish:m}}(),q=T.finish||I&&I.depositOngoing,G=!T.ready||!P||q,H=J.finish||I&&I.claimOngoing,K=!J.ready||H;return(0,k.jsx)(u.Z,{path:"/user",children:(0,k.jsxs)(c.Z,{basic:!0,className:e,children:[(0,k.jsx)(p.Z,{}),(0,k.jsxs)(c.Z,{basic:!0,className:"mcontent",children:[(0,k.jsxs)("div",{className:"user-Info",children:[(0,k.jsx)("div",{className:"title",children:W?"You are Premium User":"You are Trial User"}),(0,k.jsxs)("div",{className:"sub-text",children:["Web3 Identity Logged-in\uff1a",(0,k.jsx)("span",{children:t.account})]})]}),(0,k.jsxs)("div",{className:"user-premium-panel",children:[(0,k.jsx)("div",{className:"title",children:"Why Premium?"}),(0,k.jsxs)("div",{className:"permium-trial",children:[(0,k.jsxs)("div",{className:"mtable premium",children:[(0,k.jsx)("div",{className:"t-title",children:"Premium User"}),(0,k.jsxs)("div",{className:"t-item",children:["End-2-end File Encryption",(0,k.jsx)("img",{className:"icon",src:"/images/icon_hook.png"})]}),(0,k.jsxs)("div",{className:"t-item",children:["Maximum Upload Size=",(0,k.jsx)("span",{children:"1GB"})]}),(0,k.jsxs)("div",{className:"t-item",children:[(0,k.jsx)("span",{children:"Renew"})," On-chain Storage Order",(0,k.jsx)("span",{className:"space"}),"Place ",(0,k.jsx)("span",{children:"\u201cPermanent Storage Order\u201d"})]}),(0,k.jsx)("div",{className:"t-item",children:"More Space"}),(0,k.jsxs)("div",{className:"t-item",children:[(0,k.jsx)("span",{children:"Claim Rewards"})," from \u201cShare-and-Earn\u201d"]})]}),(0,k.jsxs)("div",{className:"mtable trial",children:[(0,k.jsx)("div",{className:"t-title",children:"Trial User"}),(0,k.jsxs)("div",{className:"t-item",children:["End-2-end File Encryption",(0,k.jsx)("img",{className:"icon",src:"/images/icon_fork.png"})]}),(0,k.jsxs)("div",{className:"t-item",children:["Maximum Upload Size=",(0,k.jsx)("span",{children:"40MB"})]}),(0,k.jsxs)("div",{className:"t-item",children:["Storage Order Expires in ",(0,k.jsx)("span",{children:"6 Months"})]}),(0,k.jsxs)("div",{className:"t-item",children:[(0,k.jsx)("span",{children:"Limited"})," Space"]}),(0,k.jsxs)("div",{className:"t-item",children:[(0,k.jsx)("span",{children:"Cannot"})," Claim Rewards from \u201cShare-and-Earn\u201d"]})]})]})]}),!i&&(0,k.jsxs)(d.o,{children:[(0,k.jsx)("div",{className:"title font-sans-semibold",children:"How to get a Premium"}),(0,k.jsx)("div",{className:"text font-sans-regular",children:"Log in with Crust Wallet and Deposit CRU to get a Premium. "}),(0,k.jsx)("div",{className:"btns mbtns",children:(0,k.jsx)(m.Z,{content:"Download Crust Wallet",onClick:function(){return window.open(h.up,"_blank")}})})]}),Y&&(0,k.jsxs)(d.o,{children:[(0,k.jsx)("div",{className:"title font-sans-semibold",children:"Get a Premium"}),(0,k.jsxs)("div",{className:"text font-sans-regular",children:["A Premium user plan asks for ",Z," CRU deposit. If you have an invitation code, which is the Metaverse Citizen ID of your inviter, the deposit is ",R," CRU."]}),(0,k.jsxs)("div",{className:"btns mbtns",children:[(0,k.jsx)("input",{className:"input-Nickname",placeholder:"Enter Invitoe\u2019s Nickname\uff08Leave blank if you have no invitor.\uff09",onChange:O}),(0,k.jsx)("span",{className:"input-NickError",children:l}),(0,k.jsx)("br",{}),(0,k.jsx)(m.Z,{content:q?"Please wait for transaction finalization\u2026":"Deposit ".concat(P," CRU"),disabled:G,onClick:function(){T.start()}}),(0,k.jsx)("a",{href:"",target:"_blank",children:"How to deposit?"})]})]}),B&&(0,k.jsxs)(d.o,{children:[(0,k.jsx)("div",{className:"title font-sans-semibold",children:"Redeem Your Deposit"}),(0,k.jsxs)("div",{className:"text font-sans-regular",children:["You can redeem back your full deposit after 6 months from your deposit date or half of the deposit in no more than 6 months from your deposit date.",(0,k.jsx)("br",{}),"Full Redeem on ",(0,k.jsx)("span",{className:"font-sans-semibold",style:{color:"#333333"},children:"2022-05-28"})," (6 months after your deposit)"]}),(0,k.jsxs)("div",{className:"btns mbtns",children:[(0,k.jsx)(m.Z,{content:H?"Ongoing Redeem...":"Redeem ".concat(P," CRU"),disabled:K,onClick:function(){J.start()}}),(0,k.jsx)("a",{href:"",target:"_blank",children:"Learn more about Redeem Rules."})]}),H&&(0,k.jsx)("div",{className:"tip",children:"Redeem will be done in less than 24 hours. Check your balance later."})]})]})]})})}))(N||(N=(0,i.Z)(["\n  padding: unset !important;\n  .mcontent {\n    margin: unset !important;\n    padding: 0 0 3rem 0 !important;\n    overflow: auto;\n  }\n  .mcard{\n    a {\n      font-size: 10px;\n      text-decoration: underline;\n      color: #999999;\n      margin-left: 9px;\n    }\n    .mbtns {\n      button {\n        min-width: 27rem;\n      }\n    }\n    .tip {\n      margin-top: 1rem;\n      line-height: 20px;\n      color: #999999;\n    }\n  }\n\n  .user-Info {\n    margin: 2.21rem 2.29rem 0 2.39rem !important;\n    .title {\n      margin-bottom: 8px;\n      font-size: 24px;\n      font-family: OpenSans-SemiBold;\n      line-height: 33px;\n    }\n    .sub-text {\n      font-size: 14px;\n      line-height: 22px;\n      color: var(--secend-color);\n      span {\n        color: var(--main-color);\n        font-family: OpenSans-SemiBold;\n      }\n    }\n  }\n\n  .user-premium-panel {\n    margin: 2.21rem 2.29rem 0 2.39rem !important;\n    .title {\n      margin-bottom: 16px;\n      font-size: 24px;\n      font-family: OpenSans-SemiBold;\n      line-height: 33px;\n    }\n    .permium-trial {\n      display: flex;\n      .mtable {\n        flex: 1;\n        border-radius: 16px;\n        overflow: hidden;\n        .t-title,.t-item {\n            padding: 0 24px;\n            white-space: nowrap;\n            overflow: hidden;\n            text-overflow: ellipsis;\n        }\n        .t-title {\n          line-height: 54px;\n          height: 54px;\n          text-align: center;\n          color: white;\n          font-size: 18px;\n          font-weight: 600;\n        }\n        .t-item {\n          font-weight: 500;\n          font-size: 16px;\n          line-height: 50px;\n          height: 50px;\n          color: var(--main-color);\n          span {\n            color: var(--primary-color);\n          }\n        }\n        .icon {\n          height: 50px;\n          width: auto;\n          vertical-align: top;\n          margin-left: 16px;\n          display: inline-block;\n          object-fit: none;\n        }\n        .space {\n          margin-left: 24px;\n        }\n      }\n      .premium {\n        background: #FFEEDA;\n        margin-right: 32px;\n        .t-item:nth-child(2n + 1){\n          background-color: rgba(255,255,255,0.45);\n        }\n        .t-title {\n          background-color: var(--primary-color);\n        }\n      }\n      .trial {\n        background: #eeeeee;\n        /* margin-right: 32px; */\n        .t-item:nth-child(2n + 1){\n          background-color: rgba(255,255,255,0.45);\n        }\n        .t-title {\n          background-color: black;\n        }\n      }\n    }\n  }\n\n  .input-Nickname {\n    display: inline-block;\n    min-width: 27rem;\n    margin-bottom: 12px;\n    height: 38px;\n    line-height: 38px;\n    border: 1px solid #999999;\n    outline: unset;\n    border-radius: 8px;\n    padding-left: 16px;\n    font-size: 10px;\n    &::placeholder{\n      color: #999999;\n    }\n  }\n  .input-NickError {\n    font-size: 10px;\n    color: #F37565;\n    margin-left: 12px;\n  }\n"]))))},18817:function(n,e,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/user",function(){return t(76435)}])}},function(n){n.O(0,[610,872,950,774,888,179],(function(){return e=18817,n(n.s=e);var e}));var e=n.O();_N_E=e}]);