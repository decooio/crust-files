(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[370],{12107:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return k}});var r=t(80318),s=t(11163),i=t(67294),a=t(23499),c=t(35766),o=t(29163),l=t(60954),d=t(92809),u=t(10219),m=t(94184),f=t.n(m),p=t(21004),h=t(65058),j=t(85893),b=["className","title","defActive","content"];function g(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function v(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?g(Object(t),!0).forEach((function(n){(0,d.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):g(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var x=i.memo((0,o.ZP)((function(e){var n=e.className,t=e.title,s=e.defActive,i=void 0!==s&&s,a=e.content,c=(0,u.Z)(e,b),o=(0,h.O)(i),l=(0,r.Z)(o,2),d=l[0],m=l[1];return(0,j.jsxs)(p.Z,v(v({className:n},c),{},{children:[(0,j.jsx)(p.Z.Title,{active:d,onClick:function(){return m()},children:(0,j.jsxs)("div",{className:"title font-sans-semibold",children:[t,(0,j.jsx)("span",{className:f()("icon",d?"cru-fo-chevron-up":"cru-fo-chevron-down")})]})}),(0,j.jsx)(p.Z.Content,{active:d,children:a})]}))})).withConfig({displayName:"MAccordion",componentId:"sc-1uwsz4-0"})([""])),w=t(8670),y=t(60649),O=t(43913),N=t(12752),P=t(96705),C=t(75282);function Z(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function E(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Z(Object(t),!0).forEach((function(n){(0,d.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Z(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var R=t(34111),_=t(45129),S=t(99056);var k=i.memo((0,o.ZP)((function(e){var n=e.className,t=(0,a.$)().t,o=(0,s.useRouter)(),d=(0,P.WY)(),u="crust"===d.wallet,m=(0,R.X)((function(){return(0,_.Y1)(d.account)}),[d.account]),f=(0,r.Z)(m,2),p=f[0],h=(f[1],p&&p.deposit&&p.deposit.id),b=u&&(d.member&&1===d.member.member_state||h),g=function(){var e=(0,N.qD)(),n=e.api,t=e.alert,r=e.loading,s=(0,P.WY)(),a=(0,i.useState)(!1),c=a[0],o=a[1],l=(0,i.useState)(!1),d=l[0],u=l[1];return(0,i.useEffect)((function(){o(!1),s.account&&"crust"===s.wallet&&n&&s.crust.wallet&&o(!0)}),[n,s]),{start:function(){if(c){r.show(),u(!1);var e=E(E({},s.crust.wallet.signer),{},{signPayload:function(e){return console.info("payload:",e),s.crust.wallet.signer.signPayload(e)}});n.setSigner(e),n.tx.system.remark(JSON.stringify({scope:"crustFiles",env:C.g6,action:"claimRewards"})).signAndSend(s.account,{nonce:-1,tip:0},(function(e){n.setSigner(void 0),e.status.isFinalized&&(r.hide(),u(!0))})).catch((function(e){"string"===typeof e?t.error(e):console.error(e),r.hide()}))}},ready:c,finish:d}}(),v=(0,R.X)((function(){return(0,_.rS)(d.account)}),[d.account]),Z=(0,r.Z)(v,2),k=Z[0],D=Z[1];(0,i.useEffect)((function(){var e;if(g.finish){var n=3;e=setInterval((function(){if(n<=0)return clearInterval(e),void(e=null);n-=1,D()}),5e3)}return function(){return e&&clearInterval(e)}}),[g.finish]);var I=k&&k.pendingReward,z=(0,i.useMemo)((function(){return(0,S.vr)("".concat((null===k||void 0===k?void 0:k.pendingReward)||"0"))}),[k]),M=(0,i.useMemo)((function(){return(0,S.vr)("".concat((null===k||void 0===k?void 0:k.claimedReward)||"0"))}),[k]),U=(0,i.useMemo)((function(){return k&&k.totalInvition}),[k]),A=g.finish||k&&k.claimOngoing,F=!g.ready||!I||A;return(0,j.jsx)(y.Z,{path:"/share-earn",children:(0,j.jsxs)(c.Z,{basic:!0,className:n,children:[(0,j.jsx)(O.Z,{}),(0,j.jsxs)(c.Z,{basic:!0,className:"mcontent",children:[(0,j.jsxs)("div",{className:"share-and-earn",children:[(0,j.jsx)("img",{src:"/images/share_earn2.png"}),(0,j.jsxs)("div",{className:"text",children:["Share files to your friends and invite them to use ",(0,j.jsx)("span",{children:"Crust Files"}),". Enjoy and Earn ",(0,j.jsx)("span",{children:"$CRU"})," !!!"]})]}),(0,j.jsx)(w.o,{children:(0,j.jsx)(x,{title:"How to Share-and-Earn?"})}),(0,j.jsx)(w.o,{children:(0,j.jsx)(x,{title:"Learn about more detailed rules"})}),(0,j.jsx)(w.o,{children:(0,j.jsx)(x,{title:"Get Crust Wallet and CRU"})}),b&&(0,j.jsxs)(w.o,{children:[(0,j.jsx)("div",{className:"title font-sans-semibold",children:t("My REwards")}),(0,j.jsxs)("div",{className:"text font-sans-regular",children:["Pending Claim Rewards : ",(0,j.jsx)("span",{className:"b-text",children:"".concat(z," CRU")}),"Claimed Rewards : ",(0,j.jsx)("span",{className:"b-text",children:"".concat(M," CRU")}),"Valid Invition : ",(0,j.jsx)("span",{className:"b-text",children:U})]}),(0,j.jsxs)("div",{className:"btns mbtns",children:[(0,j.jsx)(l.Z,{content:t(A?"Ongoing Claim...":"Claim Rewards"),disabled:F,onClick:function(){g.start()}}),A&&(0,j.jsx)("span",{className:"tip",children:"Claim will be done on a daily basis, please check your balance in 24 hours."})]})]}),!b&&(0,j.jsxs)(w.o,{children:[(0,j.jsx)("div",{className:"title font-sans-semibold",children:t("My REwards")}),(0,j.jsxs)("div",{className:"text font-sans-regular",children:["Total Rewards : ",(0,j.jsx)("span",{className:"b-text",children:"".concat(z," CRU")}),"Valid Invition : ",(0,j.jsx)("span",{className:"b-text",children:U})]}),(0,j.jsx)("div",{className:"btns mbtns",children:(0,j.jsx)(l.Z,{content:t("Get Premium"),onClick:function(){return o.push("/docs/CrustFiles_Users")}})})]})]})]})})})).withConfig({displayName:"share-earn",componentId:"sc-59zcdp-0"})(["padding:unset !important;.mcontent{margin:unset !important;padding:0 0 3rem 0 !important;overflow:auto;.share-and-earn{margin:2.21rem 2.29rem 0 2.39rem;border:2px solid #000000;border-radius:16px;display:flex;align-items:center;padding:1.428571rem 3.571429rem;img{width:16.214286rem;height:auto;margin-right:2.142857rem;}.text{font-size:2.571429rem;line-height:3.5rem;font-weight:600;span{color:var(--primary-color);}}}.mcard{.ui.accordion{.title{padding:unset !important;}}.b-text{color:var(--primary-color);font-size:18px;font-weight:600;margin-right:4.285714rem;}.mbtns{button{min-width:16.428571rem;}.tip{margin-left:9px;font-size:10px;color:#999999;}}}}"]))},3783:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/share-earn",function(){return t(12107)}])}},function(e){e.O(0,[610,951,12,843,774,888,179],(function(){return n=3783,e(e.s=n);var n}));var n=e.O();_N_E=n}]);