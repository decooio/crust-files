(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[235],{76435:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return k}});var i=n(80318),r=n(11384),s=n(96486),a=n.n(s),o=n(67294),c=n(35766),l=n(29163),d=n(60954),u=n(8670),m=n(60649),p=n(43913),h=n(75282),f=n(92809),x=n(12752),g=n(96705);function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var j=n(34111),w=n(45129),y=n(99056),N=n(85893);var k=o.memo((0,l.ZP)((function(e){var t=e.className,n=(0,g.WY)(),s="crust"===n.wallet,l=(0,o.useState)(),f=l[0],v=l[1],k=(0,o.useState)(),S=k[0],O=k[1],P=(0,o.useMemo)((function(){return a().debounce((function(e){var t=e.target.value;v(""),O(""),t&&(0,w.lK)(t).then((function(e){e!==n.account?O(e):v("It can't be your own")})).catch((function(e){return v("Not found")}))}),300)}),[n.account]),E=(0,o.useState)(),_=E[0],C=E[1],z=(0,j.X)((function(){return(0,w.w2)()})),R=(0,i.Z)(z,1)[0],D=(0,j.X)((function(){return(0,w.Y1)(n.account)}),[n.account]),M=(0,i.Z)(D,2),Z=M[0],F=M[1],I=Z&&Z.deposit&&Z.deposit.id,U=s&&!I,W=s&&I,Y=s&&(n.member&&1===n.member.member_state||I),A=(0,j.X)((function(){return(0,w.Pk)()})),B=(0,i.Z)(A,1)[0],L=(0,o.useMemo)((function(){return(0,y.zw)(_)}),[_]),T=(0,o.useMemo)((function(){if(!I)return"-";var e=(new Date).getTime()/1e3;return Z.deposit.expire_timestamp>e?(0,y.vr)(Z.deposit.claim_amount):(0,y.vr)(Z.deposit.deposit_amount)}),[I]),X=(0,o.useMemo)((function(){return(0,y.zw)((null===R||void 0===R?void 0:R.guaranteeAmount)||"")}),[R]),q=(0,o.useMemo)((function(){return(0,y.zw)((null===R||void 0===R?void 0:R.guaranteeDiscountWithReferer)||"")}),[R]),G=(0,o.useMemo)((function(){if(!R||!W)return 6;var e=new Number(R.guaranteePeriod).valueOf();return Math.round(e/60/60/24/30)}),[W,R]),H=(0,o.useMemo)((function(){return I?(0,r.Z)(1e3*Z.deposit.expire_timestamp,"yyyy-MM-dd"):"--:--:--"}),[I]);(0,o.useEffect)((function(){R&&C(S?R.guaranteeDiscountWithReferer:R.guaranteeAmount)}),[R,S]);var J=function(e,t,n){var i=(0,x.qD)(),r=i.api,s=i.alert,a=i.loading,c=(0,g.WY)(),l=(0,o.useState)(!1),d=l[0],u=l[1],m=(0,o.useState)(!1),p=m[0],f=m[1];return(0,o.useEffect)((function(){u(!1),c.account&&"crust"===c.wallet&&e&&t&&r&&c.crust.wallet&&u(!0)}),[r,c,e,t]),{start:function(){if(d){f(!1),a.show();var i=b(b({},c.crust.wallet.signer),{},{signPayload:function(e){return console.info("payload:",e),c.crust.wallet.signer.signPayload(e)}});r.setSigner(i);var o=t;console.info("deposit:",e,t,o);var l=r.tx.balances.transfer(e,o),u=r.tx.system.remark(JSON.stringify({scope:"crustFiles",env:h.g6,action:"deposit",share_from:n}));r.tx.utility.batchAll([l,u]).signAndSend(c.account,{nonce:-1,tip:0},(function(e){r.setSigner(void 0),e.status.isFinalized&&(a.hide(),f(!0))})).catch((function(e){"string"===typeof e?s.error(e):console.error(e),a.hide()}))}},ready:d,finish:p}}(B,_,S),K=function(){var e=(0,x.qD)(),t=e.api,n=e.alert,i=e.loading,r=(0,g.WY)(),s=(0,o.useState)(!1),a=s[0],c=s[1],l=(0,o.useState)(!1),d=l[0],u=l[1];return(0,o.useEffect)((function(){c(!1),r.account&&"crust"===r.wallet&&t&&r.crust.wallet&&c(!0)}),[t,r]),{start:function(){if(a){i.show(),u(!1);var e=b(b({},r.crust.wallet.signer),{},{signPayload:function(e){return console.info("payload:",e),r.crust.wallet.signer.signPayload(e)}});t.setSigner(e),t.tx.system.remark(JSON.stringify({scope:"crustFiles",env:h.g6,action:"claimDeposit"})).signAndSend(r.account,{nonce:-1,tip:0},(function(e){t.setSigner(void 0),e.status.isFinalized&&(i.hide(),u(!0))})).catch((function(e){"string"===typeof e?n.error(e):console.error(e),i.hide()}))}},ready:a,finish:d}}();(0,o.useEffect)((function(){var e;if(J.finish||K.finish){var t=3;e=setInterval((function(){t<=0?clearInterval(e):(t-=1,F())}),5e3)}return function(){return e&&clearInterval(e)}}),[J.finish,K.finish]);var Q=J.finish||Z&&Z.depositOngoing,V=!J.ready||!_||Q,$=K.finish||Z&&Z.claimOngoing,ee=!K.ready||$;return(0,N.jsx)(m.Z,{path:"/user",children:(0,N.jsxs)(c.Z,{basic:!0,className:t,children:[(0,N.jsx)(p.Z,{}),(0,N.jsxs)(c.Z,{basic:!0,className:"mcontent",children:[(0,N.jsxs)("div",{className:"user-Info",children:[(0,N.jsx)("div",{className:"title",children:Y?"You are Premium User":"You are Trial User"}),(0,N.jsxs)("div",{className:"sub-text",children:["Web3 Identity Logged-in\uff1a",(0,N.jsx)("span",{children:n.account})]})]}),(0,N.jsxs)("div",{className:"user-premium-panel",children:[(0,N.jsx)("div",{className:"title",children:"Why Premium?"}),(0,N.jsxs)("div",{className:"permium-trial",children:[(0,N.jsxs)("div",{className:"mtable premium",children:[(0,N.jsx)("div",{className:"t-title",children:"Premium User"}),(0,N.jsxs)("div",{className:"t-item",children:["End-2-end File Encryption",(0,N.jsx)("img",{className:"icon",src:"/images/icon_hook.png"})]}),(0,N.jsxs)("div",{className:"t-item",children:["Maximum Upload Size=",(0,N.jsx)("span",{children:"1GB"})]}),(0,N.jsxs)("div",{className:"t-item",children:[(0,N.jsx)("span",{children:"Renew"})," On-chain Storage Order",(0,N.jsx)("span",{className:"space"}),"Place ",(0,N.jsx)("span",{children:"\u201cPermanent Storage Order\u201d"})]}),(0,N.jsx)("div",{className:"t-item",children:"More Space"}),(0,N.jsxs)("div",{className:"t-item",children:[(0,N.jsx)("span",{children:"Claim Rewards"})," from \u201cShare-and-Earn\u201d"]})]}),(0,N.jsxs)("div",{className:"mtable trial",children:[(0,N.jsx)("div",{className:"t-title",children:"Trial User"}),(0,N.jsxs)("div",{className:"t-item",children:["End-2-end File Encryption",(0,N.jsx)("img",{className:"icon",src:"/images/icon_fork.png"})]}),(0,N.jsxs)("div",{className:"t-item",children:["Maximum Upload Size=",(0,N.jsx)("span",{children:"40MB"})]}),(0,N.jsxs)("div",{className:"t-item",children:["Storage Order Expires in ",(0,N.jsx)("span",{children:"6 Months"})]}),(0,N.jsxs)("div",{className:"t-item",children:[(0,N.jsx)("span",{children:"Limited"})," Space"]}),(0,N.jsxs)("div",{className:"t-item",children:[(0,N.jsx)("span",{children:"Cannot"})," Claim Rewards from \u201cShare-and-Earn\u201d"]})]})]})]}),!s&&(0,N.jsxs)(u.o,{children:[(0,N.jsx)("div",{className:"title font-sans-semibold",children:"How to get a Premium"}),(0,N.jsx)("div",{className:"text font-sans-regular",children:"Log in with Crust Wallet and Deposit CRU to get a Premium. "}),(0,N.jsx)("div",{className:"btns mbtns",children:(0,N.jsx)(d.Z,{content:"Download Crust Wallet",onClick:function(){return window.open(h.up,"_blank")}})})]}),U&&(0,N.jsxs)(u.o,{children:[(0,N.jsx)("div",{className:"title font-sans-semibold",children:"Get a Premium"}),(0,N.jsxs)("div",{className:"text font-sans-regular",children:["A Premium user plan asks for ",X," CRU deposit. If you have an invitation code, which is the Metaverse Citizen ID of your inviter, the deposit is ",q," CRU."]}),(0,N.jsxs)("div",{className:"btns mbtns",children:[(0,N.jsx)("input",{className:"input-Nickname",placeholder:"Enter Invitoe\u2019s Nickname\uff08Leave blank if you have no invitor.\uff09",onChange:P}),(0,N.jsx)("span",{className:"input-NickError",children:f}),(0,N.jsx)("br",{}),(0,N.jsx)(d.Z,{content:Q?"Please wait for transaction finalization\u2026":"Deposit ".concat(L," CRU"),disabled:V,onClick:function(){J.start()}}),(0,N.jsx)("a",{href:"/docs/CrustFiles_ShareandEarn",target:"_blank",children:"How to deposit?"})]})]}),W&&(0,N.jsxs)(u.o,{children:[(0,N.jsx)("div",{className:"title font-sans-semibold",children:"Redeem Your Deposit"}),(0,N.jsxs)("div",{className:"text font-sans-regular",children:["You can redeem back your full deposit after ",G," months from your deposit date or half of the deposit in no more than ",G," months from your deposit date.",(0,N.jsx)("br",{}),"Full Redeem on ",(0,N.jsx)("span",{className:"font-sans-semibold",style:{color:"#333333"},children:H})," (",G," months after your deposit)"]}),(0,N.jsxs)("div",{className:"btns mbtns",children:[(0,N.jsx)(d.Z,{content:$?"Ongoing Redeem...":"Redeem ".concat(T," CRU"),disabled:ee,onClick:function(){K.start()}}),(0,N.jsx)("a",{href:"/docs/CrustFiles_ShareandEarn",target:"_blank",children:"Learn more about Redeem Rules."})]}),$&&(0,N.jsx)("div",{className:"tip",children:"Redeem will be done in less than 24 hours. Check your balance later."})]})]})]})})})).withConfig({displayName:"user",componentId:"sc-538gkd-0"})(["padding:unset !important;.mcontent{margin:unset !important;padding:0 0 3rem 0 !important;overflow:auto;}.mcard{a{font-size:10px;text-decoration:underline;color:#999999;margin-left:9px;}.mbtns{button{min-width:27rem;}}.tip{margin-top:1rem;line-height:20px;color:#999999;}}.user-Info{margin:2.21rem 2.29rem 0 2.39rem !important;.title{margin-bottom:8px;font-size:24px;font-family:OpenSans-SemiBold;line-height:33px;}.sub-text{font-size:14px;line-height:22px;color:var(--secend-color);span{color:var(--main-color);font-family:OpenSans-SemiBold;}}}.user-premium-panel{margin:2.21rem 2.29rem 0 2.39rem !important;.title{margin-bottom:16px;font-size:24px;font-family:OpenSans-SemiBold;line-height:33px;}.permium-trial{display:flex;.mtable{flex:1;border-radius:16px;overflow:hidden;.t-title,.t-item{padding:0 24px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;}.t-title{line-height:54px;height:54px;text-align:center;color:white;font-size:18px;font-weight:600;}.t-item{font-weight:500;font-size:16px;line-height:50px;height:50px;color:var(--main-color);span{color:var(--primary-color);}}.icon{height:50px;width:auto;vertical-align:top;margin-left:16px;display:inline-block;object-fit:none;}.space{margin-left:24px;}}.premium{background:#FFEEDA;margin-right:32px;.t-item:nth-child(2n + 1){background-color:rgba(255,255,255,0.45);}.t-title{background-color:var(--primary-color);}}.trial{background:#eeeeee;.t-item:nth-child(2n + 1){background-color:rgba(255,255,255,0.45);}.t-title{background-color:black;}}}}.input-Nickname{display:inline-block;min-width:27rem;margin-bottom:12px;height:38px;line-height:38px;border:1px solid #999999;outline:unset;border-radius:8px;padding-left:16px;font-size:10px;&::placeholder{color:#999999;}}.input-NickError{font-size:10px;color:#F37565;margin-left:12px;}"]))},18817:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/user",function(){return n(76435)}])}},function(e){e.O(0,[610,951,384,843,774,888,179],(function(){return t=18817,e(e.s=t);var t}));var t=e.O();_N_E=t}]);