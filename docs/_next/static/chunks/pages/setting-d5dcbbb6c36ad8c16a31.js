(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[552],{8130:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return W}});var n=r(83789),s=r(80318),a=r(94184),o=r.n(a),i=r(93162),c=r.n(i),l=r(67294),u=r(23499),m=r(35766),d=r(21004),f=r(49147),p=r(27416),h=r(29163),g=r(60954),b=r(92809),x=r(10219),j=r(345),v=r(60416),y=r(17082),N=r(85893),w=["alert","onSuccess","toggleOpen"];function k(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function C(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?k(Object(r),!0).forEach((function(t){(0,b.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):k(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var O=l.memo((0,h.ZP)((function(e){var t=e.alert,r=e.onSuccess,n=e.toggleOpen,s=(0,x.Z)(e,w),a=(0,l.useState)(""),o=a[0],i=a[1],c=(0,l.useCallback)((function(e,t){var r=t.value;i(r)}),[]),u=(0,l.useCallback)((function(){var e=(0,y.hC)(o);e?(r(e),n(!1)):t.error("Please check input value")}),[o,t]),m=(0,l.useCallback)((function(){i(""),n(!1)}),[]);return(0,N.jsxs)(j.Z,C(C({closeIcon:(0,N.jsx)("span",{className:"close icon cru-fo-x"}),onClose:m},s),{},{children:[(0,N.jsx)(j.Z.Header,{content:"Input a new key"}),(0,N.jsxs)(j.Z.Content,{children:[(0,N.jsx)(v.Z,{fluid:!0,onChange:c}),(0,N.jsxs)("div",{className:"btns",children:[(0,N.jsx)(g.Z,{content:"Input",onClick:u}),(0,N.jsx)(g.Z,{content:"Cancel",onClick:function(){return n(!1)}})]})]})]}))})).withConfig({displayName:"ModalNewKey",componentId:"sc-1ramix5-0"})(["width:34.3rem !important;.header{height:3.93rem;font-size:1.3rem !important;padding:0 1.14rem !important;font-weight:600 !important;line-height:3.93rem !important;}.close.icon{top:0.5rem;right:0.6rem;color:#666666;}.content{padding:1rem !important;input{border:0.07rem solid #CCCCCC !important;border-radius:0.57rem !important;}.btns{padding-top:2.3rem;button{width:calc(50% - 0.5rem) !important;margin:unset;}button:first-child{margin-right:1rem;}}}"])),Z=r(60649),E=r(43913),P=r(12752),S=r(20478),_=r(65058),I=r(96705);function F(e,t){var r="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"===typeof e)return M(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return M(e,t)}(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0,s=function(){};return{s:s,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){throw e})),f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,i=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){i=!0,a=e})),f:function(){try{o||null==r.return||r.return()}finally{if(i)throw a}}}}function M(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var A={crust:"Crust Wallet",metamask:"MetaMask","metamask-Polygon":"MetaMask","metamask-Moonriver":"MetaMask","polkadot-js":"Polkadot Extension",near:"Near Wallet",elrond:"Elrond(Maiar Wallet)",flow:"Flow Wallet",solana:"Solana(Phantom Wallet)","wallet-connect":"WalletConnect"};var W=l.memo((0,h.ZP)((function(e){var t=e.className,r=(0,u.$)().t,a=(0,y.MH)(),i=(0,l.useContext)(P.Il).alert,h=(0,_.O)(!1),b=(0,s.Z)(h,2),x=b[0],j=b[1],v=(0,_.O)(),w=(0,s.Z)(v,2),k=w[0],C=w[1],M=(0,S.V)(),W=(0,I.WY)(),T=(0,l.useMemo)((function(){return W.member&&1===W.member.member_state?"Premium":"Trial"}),[W]),U="crust"===W.wallet,z=(0,I.Yg)(),D=(0,l.useRef)(null),H=(0,l.useCallback)((function(){D.current&&D.current.click()}),[D]),Y=(0,l.useCallback)((function(e){try{var t=new FileReader,s=e.target.files;if(!s)return;if(t.readAsText(s[0],"UTF-8"),!/(.json)$/i.test(e.target.value))return i.error(r("File error"));t.onload=function(e){var t,s=JSON.parse(null===(t=e.target)||void 0===t?void 0:t.result),o={files:[]};if(Array.isArray(s))o.files=s;else{if(!s.files||!Array.isArray(s.files))return i.error(r("File content error"));o.secret=s.secret,o.files=s.files}if(a.secret&&o.secret&&o.secret!==a.secret)return i.error("Two secrets were found, and they are different.");if(o.secret){var c=(0,y.hC)(o.secret);c&&a.set(c)}var l,u=[],m={},d=F(o.files);try{for(d.s();!(l=d.n()).done;){var f=l.value;f.Hash&&f.Name&&f.UpEndpoint&&f.PinEndpoint&&(u.push(f),m[f.Hash]=!0)}}catch(h){d.e(h)}finally{d.f()}var p=z.files.filter((function(e){return!m[e.Hash]}));z.setFiles([].concat(u,(0,n.Z)(p))),i.alert({msg:r("Import Success"),type:"success"})}}catch(e){i.alert({msg:r("File content error"),type:"error"})}}),[z,a.set,i,r]),G=(0,l.useCallback)((function(){var e={files:z.files,secret:a.secret},t=new Blob([JSON.stringify(e)],{type:"application/json; charset=utf-8"});c().saveAs(t,"backup.json")}),[z,a]);return(0,N.jsx)(Z.Z,{path:"/setting",children:(0,N.jsxs)(m.Z,{basic:!0,className:t,children:[(0,N.jsx)("input",{onChange:Y,ref:D,style:{display:"none"},type:"file"}),(0,N.jsx)(E.Z,{}),x&&(0,N.jsx)(O,{alert:i,size:"tiny",open:!0,toggleOpen:j,onSuccess:a.set}),(0,N.jsxs)(m.Z,{basic:!0,className:"mcontent",children:[(0,N.jsxs)(m.Z,{basic:!0,className:"mcard",children:[(0,N.jsx)("div",{className:"title font-sans-semibold",children:r("User Profile")}),(0,N.jsxs)("div",{className:"text font-sans-regular",children:["".concat(r("Web3 Identity Logged-in:")," "),(0,N.jsx)("span",{className:"bold-text font-sans-semibold",children:W.account})]}),(0,N.jsxs)("div",{className:"text font-sans-regular",children:["".concat(r("Logged-in Wallet:")," "),(0,N.jsx)("span",{className:"bold-text font-sans-semibold",children:A[W.wallet]})]}),(0,N.jsxs)("div",{className:"text font-sans-regular",children:["".concat(r("Nick Name:")," "),W.nickName&&(0,N.jsx)("span",{className:"bold-text font-sans-semibold",children:W.nickName}),!U&&(0,N.jsx)("a",{className:"",target:"_blank",href:"/docs/CrustFiles_Users",rel:"noreferrer",children:"Get a Nick Name"})]}),(0,N.jsxs)("div",{className:"text font-sans-regular",children:["".concat(r("User Type:")," "),U&&(0,N.jsx)("span",{className:"bold-text font-sans-semibold",children:T}),!U&&(0,N.jsx)("a",{target:"_blank",href:"/docs/CrustFiles_Users",rel:"noreferrer",children:"Get a Premium"})]})]}),(0,N.jsxs)(m.Z,{basic:!0,className:"mcard",children:[(0,N.jsx)("div",{className:"title font-sans-semibold",children:r("User Data Management")}),(0,N.jsx)("div",{className:"text font-sans-regular",children:"".concat(r("Your user data (including three File Lists and one File Encryption Key) are cached on your local devices. If you want to migrate your user data to a new device, use Export & Import function.")," ")}),(0,N.jsxs)(d.Z,{children:[(0,N.jsx)(f.Z,{active:k,onClick:function(){return C()},children:(0,N.jsxs)("div",{className:"title font-sans-semibold",children:[r("File Encryption"),(0,N.jsx)("span",{className:o()("icon",k?"cru-fo-chevron-up":"cru-fo-chevron-down")})]})}),(0,N.jsxs)(p.Z,{active:k,className:"no-padding",children:[(0,N.jsxs)("div",{className:"text font-sans-regular",children:["".concat(r("Your File Encryption Key:")," "),a.secret&&(0,N.jsxs)("span",{className:"bold-text font-sans-semibold",children:[a.secret,(0,N.jsx)("span",{className:"icon cru-fo-copy",onClick:function(){return M(a.secret)}})]}),!a.secret&&(0,N.jsx)("a",{onClick:a.generate,children:"Generate a New"})]}),a.seeds&&(0,N.jsxs)("div",{className:"text font-sans-regular",children:["".concat(r("Seed Phrase:")," "),(0,N.jsx)("span",{className:"bold-text font-sans-semibold",children:a.seeds})]})]})]}),(0,N.jsxs)("div",{className:"btns",children:[(0,N.jsx)(g.Z,{content:r("Export"),onClick:G}),(0,N.jsx)(g.Z,{content:r("Import"),onClick:H})]})]})]})]})})})).withConfig({displayName:"setting",componentId:"sc-1rkrrxr-0"})(["padding:unset !important;.mcontent{margin:unset !important;padding:0 0 3rem 0 !important;overflow:auto;}.mcard{padding:1.71rem !important;box-shadow:0 0.71rem 1.71rem 0 rgba(0,0,0,0.06) !important;border-radius:1.14rem !important;border:0.07rem solid #EEEEEE !important;margin:2.21rem 2.29rem 0 2.39rem !important;.title{font-size:1.3rem !important;font-weight:600;color:var(--main-color);padding-bottom:1.14rem;.cru-fo{margin-right:0.8rem;}}.text{font-size:1rem;color:var(--secend-color);line-height:1.57rem;}.icon{margin-left:1rem;font-size:1.428571rem;position:relative;top:3px;cursor:pointer;}.bold-text{color:var(--main-color);}a{text-decoration:underline;line-height:1.2rem;cursor:pointer;}.btns{margin-top:1.7rem;button:first-child{margin-right:1rem;}}}"]))},63782:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/setting",function(){return r(8130)}])}},function(e){e.O(0,[610,951,615,545,603,774,888,179],(function(){return t=63782,e(e.s=t);var t}));var t=e.O();_N_E=t}]);