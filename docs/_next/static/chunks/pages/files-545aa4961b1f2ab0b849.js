(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[869],{60954:function(e,n,t){"use strict";var r,o=t(52209),i=t(92809),a=t(67294),s=t(48237),c=t(29163),l=t(85893);function u(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}n.Z=a.memo((0,c.ZP)((function(e){return(0,l.jsx)(s.Z,function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?u(Object(t),!0).forEach((function(n){(0,i.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):u(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}({},e))}))(r||(r=(0,o.Z)(["\n  background: unset !important;\n  border: 1px solid var(--primary-color) !important;\n  color: var(--primary-color) !important;\n  font-weight: normal !important;\n\n  &:hover {\n    background: var(--primary-color) !important;\n    color: white !important;\n  }\n"]))))},60649:function(e,n,t){"use strict";var r,o=t(52209),i=t(67294),a=t(76736),s=t(35766),c=t(14309),l=t(8736),u=t(94983),p=t(65382),d=t(11163),f=t(94184),m=t.n(f),h=t(29163),g=t(85893),v=[{path:"/files",icon:"file outline",name:"Upload"},{path:"/docs",icon:"file alternate outline",name:"Docs"},{path:"/setting",icon:"setting",name:"Setting"}];n.Z=i.memo((0,h.ZP)((function(e){var n=(0,d.useRouter)(),t=(0,i.useCallback)((function(t,r){var o=r.index,i=v[o];i.path!==e.path&&n.push(i.path)}),[e.path]);return(0,g.jsxs)(a.Z.Pushable,{as:s.Z,className:m()(e.className,"basic"),children:[(0,g.jsx)(a.Z,{as:s.Z,animation:"push",direction:"left",visible:!0,className:"font1 basic",children:(0,g.jsxs)(c.Z,{textAlign:"center",children:[(0,g.jsx)(c.Z.Row,{columns:1,className:"logoPanel",children:(0,g.jsx)(l.Z,{size:"small",src:"/images/crust_box2x.png"})}),(0,g.jsx)(c.Z.Row,{columns:1,children:(0,g.jsx)(u.Z,{fluid:!0,vertical:!0,borderless:!0,children:v.map((function(n,r){return(0,g.jsx)(u.Z.Item,{position:"left",index:r,active:n.path===e.path,icon:(0,g.jsx)(p.Z,{name:n.icon}),name:n.name,onClick:t,className:"font1"},"side_menu_".concat(r))}))})})]})}),(0,g.jsx)(a.Z.Pusher,{children:e.children})]})}))(r||(r=(0,o.Z)(["\n  overflow: hidden;\n  height: 100vh;\n  background: white;\n\n  .ui.sidebar {\n    background: #F5F5F5;\n    box-shadow: unset !important;\n    .logoPanel {\n      padding: 2rem 0;\n    }\n    .menu {\n      box-shadow: unset !important;\n      border: unset !important;\n      border-radius: unset !important;\n      background: unset !important;\n\n      .item {\n        border-radius: 0;\n        text-align: left;\n        padding-left: 2rem !important;\n        font-weight: 500;\n        font-size: 1.3rem;\n        color: var(--secend-color);\n\n        &.active {\n          color: var(--main-color);\n        }\n\n        .icon {\n          float: left;\n          margin-right: 10px;\n        }\n      }\n    }\n  }\n\n  .pusher {\n    width: calc(100vw - 260px);\n    height: 100vh;\n    overflow: auto !important;\n    background: white;\n  }\n"]))))},56290:function(e,n,t){"use strict";var r,o=t(52209),i=t(67294),a=t(35766),s=t(88188),c=t(4838),l=t(99816),u=t(29163),p=t(85893);function d(e){switch(e){case"crust":return"/images/wallet_crust.png";case"polkadot-js":return"/images/wallet_polkadot.png";case"metamask":return"/images/wallet_metamask.png";case"near":return"/images/wallet_near.png";case"solana":return"/images/wallet_solana.png";case"elrond":return"/images/wallet_elrond.png";case"flow":return"/images/wallet_flow.png";default:return""}}n.Z=i.memo((0,u.ZP)((function(e){var n,t=(0,l.WY)(),r=(0,i.useCallback)(t.logout,[t]);return(0,p.jsx)(a.Z,{basic:!0,textAlign:"right",className:e.className,style:{borderBottom:"2px solid #eeeeee"},children:(0,p.jsx)(s.Z.Group,{children:(0,p.jsxs)(s.Z,{style:{justifyContent:"flex-end"},children:[(0,p.jsx)(s.Z.Image,{src:d(t.wallet),size:"tiny"}),(0,p.jsx)(s.Z.Content,{verticalAlign:"middle",style:{flex:"unset",paddingLeft:"0.5rem"},children:(0,p.jsx)(c.Z,{text:(n=t.account,n.length<=8?n:"".concat(n.substr(0,4),"...").concat(n.substr(n.length-4,4))),children:(0,p.jsx)(c.Z.Menu,{children:(0,p.jsx)(c.Z.Item,{text:"Logout",onClick:r})})})})]})})})}))(r||(r=(0,o.Z)(['\n  border-bottom: 2px solid #eeeeee;\n  margin: unset !important;\n\n  .ui.dropdown {\n    .text {\n      font-family: "ArialRoundedMTBold";\n      font-size: 1.3rem;\n    }\n  }\n']))))},17082:function(e,n,t){"use strict";t.d(n,{vZ:function(){return g},hC:function(){return v},MH:function(){return b}});var r=t(92809),o=t(30266),i=t(80318),a=t(809),s=t.n(a),c=t(67294),l=t(58971),u=t.n(l),p=t(65058);function d(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function f(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?d(Object(t),!0).forEach((function(n){(0,r.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):d(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var m=t(21994).Cypher,h=new m(4),g=function(e){return new Promise((function(n,t){var r=new FileReader;r.onload=function(){r.result&&n(r.result)},r.onerror=t,r.readAsArrayBuffer(e)}))};function v(e){try{var n=e&&e.trim();if(n){var t=n.split(" ");if(1===t.length&&t[0]){var r=t[0],o=window.atob(r),i=h.phraseFromSecret(o);if(i&&4===i.split(" ").length)return{secret:r,seeds:i}}else if(4===t.length){var a=h.secretFromPhrase(n);if(a&&4===a.split("-").length)return{secret:window.btoa(a),seeds:n}}}return null}catch(s){return null}}function b(){var e=(0,c.useState)({}),n=e[0],t=e[1],r=(0,p.O)(),a=(0,i.Z)(r,2),l=a[0],d=a[1];(0,c.useEffect)((function(){var e=u().get("user:crypto");e&&t(e),d(!0)}),[]);var h=(0,c.useCallback)((function(e){t(e),u().set("user:crypto",e)}),[]),g=(0,c.useCallback)((0,o.Z)(s().mark((function e(){var n,t,r,o,i;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new m(4),t=n.genMnemonics(),r=t.secret,o=t.mnemonics,i={secret:window.btoa(r),seeds:o},console.info("length:",r.length,i.secret.length),h(i),e.abrupt("return",i);case 6:case"end":return e.stop()}}),e)}))),[]);return(0,c.useMemo)((function(){return f(f({},n),{},{generate:g,set:h,init:l})}),[n,h,l,g])}},20478:function(e,n,t){"use strict";t.d(n,{V:function(){return s}});var r=t(67294),o=t(12752),i=t(20640),a=t.n(i);function s(){var e=(0,r.useContext)(o.I).alert;return(0,r.useCallback)((function(n){a()(n),e.alert({msg:"Copied",type:"success"})}),[e])}},65058:function(e,n,t){"use strict";t.d(n,{O:function(){return o}});var r=t(67294);function o(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=(0,r.useState)(e),t=n[0],o=n[1],i=(0,r.useCallback)((function(e){o(void 0!==e?e:function(e){return!e})}),[]);return[t,i]}},52142:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return be}});var r=t(52209),o=t(83789),i=t(80318),a=t(67294),s=t(99816),c=t(35766),l=t(86419),u=t(1300),p=t(71416),d=t(23499),f=t(60649),m=t(93162),h=t.n(m),g=t(92809),v=t(30266),b=t(809),x=t.n(b),y=t(9669),w=t.n(y);function j(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function Z(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?j(Object(t),!0).forEach((function(n){(0,g.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):j(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function k(){var e=(0,d.$)().t,n=(0,a.useMemo)((function(){return function(e){return[{location:e("Singapore"),text:e("DCF"),value:"https://crustipfs.xyz",group:"Public Gateway"},{location:e("United States"),text:e("Crust Network"),value:"https://crustwebsites.net",group:"Public Gateway"},{location:e("United States"),text:e("Crust Network"),value:"https://ipfs-gw.decloud.foundation",group:"Public Gateway"},{location:e("\ufe0f2.5x speed up"),text:e("\ufe0f\u26a1 Thunder Gateway"),value:"https://gw.crustapps.net",group:"Thunder Gateway"}]}(e).map((function(e){var n,t;return Z(Z({},e),{},{text:"".concat(null!==(n=e.text)&&void 0!==n?n:"","(").concat(null!==(t=e.location)&&void 0!==t?t:"",")")})}))}),[e]),t=(0,a.useMemo)((function(){return Math.floor(Math.random()*(n.length-2))}),[]),r=(0,a.useState)(n[t]),o=r[0],i=r[1],s=(0,a.useCallback)((function(e,t){var r=t.value,o=n.find((function(e){return e.value===r}));o&&i(o)}),[n]);return(0,a.useMemo)((function(){return{endpoints:n,endpoint:o,setEndpoint:i,onChangeEndpoint:s}}),[n,o,s])}var C=t(345),P=t(73626),O=t(28258),S=t(37838),N=t(29163),A=t(65382),E=t(28803),F=t(65058);var _,D=t(96486),z=t.n(D),T=t(94184),M=t.n(T),H=t(85893),I="_null",U=function(e){var n=e.expand,t=e.list,r=e.group,o=e.select,i=e.onClickItem,a=e.onClickGroup,s=e.renderGroupTitle,c=void 0===s?null:s,l=r===o.group;return(0,H.jsxs)("div",{className:"group",children:[r!==I&&(c&&c({group:r,select:o,onClickGroup:a})||(0,H.jsxs)("div",{className:M()("title",{active:l}),onClick:a,children:[r," ",(0,H.jsx)(A.Z,{className:"dropIcon",name:"dropdown"})]})),n&&t.map((function(e,n){return(0,H.jsx)("div",{className:M()("item",{active:l&&e.value===o.value}),onClick:function(n){return i(n,{group:r,value:e.value})},children:e.text},"group_item_".concat(n))}))]})};var R,G=a.memo((0,N.ZP)((function(e){var n,t=e.className,r=e.label,o=e.help,s=e.options,c=e.defaultValue,l=e.defaultGroup,u=void 0===l?I:l,p=e.renderGroupTitle,d=(0,a.useState)({value:c,group:u}),f=d[0],m=d[1],h=(0,a.useMemo)((function(){return z().find(s,(function(e){return(e.group||I)===f.group&&e.value===f.value}))}),[s,f]),g=(0,a.useState)(u),v=g[0],b=g[1],x=(0,F.O)(),y=(0,i.Z)(x,2),w=y[0],j=y[1],Z=function(e){var n=(0,a.useRef)(null);return(0,a.useEffect)((function(){var t,r=function(t){n.current&&n.current!==t.target&&!n.current.contains(t.target)&&e&&e(t)};return null===(t=document)||void 0===t||t.addEventListener("mouseup",r),function(){var e;null===(e=document)||void 0===e||e.removeEventListener("mouseup",r)}}),[n.current]),n}((function(){w&&j(!1)})),k=(0,a.useMemo)((function(){return z().groupBy(s,(function(e){return e.group||I}))}),[s]),C=z().keys(k);return(0,H.jsxs)("div",{className:t,onClick:function(){return j()},ref:Z,children:[r&&(0,H.jsxs)("div",{className:"label",children:[r,o&&(0,H.jsx)(E.Z,{position:"top center",trigger:(0,H.jsx)(A.Z,{name:"question circle outline"}),content:o}),(0,H.jsx)(A.Z,{name:"dropdown",className:"dropIcon"})]}),(0,H.jsx)("div",{className:"text",children:null!==(n=null===h||void 0===h?void 0:h.text)&&void 0!==n?n:""}),w&&(0,H.jsx)("div",{className:"options",children:C.map((function(n,t){return(0,H.jsx)(U,{group:n,renderGroupTitle:p,select:f,expand:v===n||n===I,list:k[n],onClickGroup:function(e){b(v===n?I:n),e.stopPropagation()},onClickItem:function(n,t){m(t),e.onChange(n,t)}},"group_".concat(t))}))})]})}))(_||(_=(0,r.Z)(["\n  position: relative;\n  width: 100%;\n  border-radius: 4px;\n  border: 1px solid var(--line-color);\n  padding: 0.8rem 1rem;\n  cursor: pointer;\n\n  .label {\n    font-size: 1.3rem;\n    white-space: nowrap;\n    color: var(--main-color);\n    margin-bottom: 0.6rem;\n\n    .icon {\n      margin-left: 0.5rem;\n      cursor: pointer;\n    }\n\n    .dropIcon {\n      float: right;\n      right: 0.6rem;\n    }\n  }\n\n  .text {\n    font-size: 1rem;\n    color: var(--secend-color);\n  }\n\n  .options {\n    width: 100%;\n    background: white;\n    position: absolute;\n    top: calc(100% + 1px);\n    left: 0;\n    z-index: 10;\n    border-radius: 4px;\n    border: 1px solid var(--line-color);\n    box-shadow: 0 1px 5px rgba(0, 0, 0, 0.3);\n\n    .group {\n\n      .title {\n        cursor: pointer;\n        border-top: 1px solid var(--line-color);\n        padding: 0.8rem 1rem;\n        font-size: 1.2rem;\n        font-weight: 500;\n\n        &:hover, &.active {\n          background: var(--line-color);\n        }\n\n        .dropIcon {\n          float: right;\n          right: 0.6rem;\n        }\n      }\n\n      .item {\n        padding: 0.6rem 1.6rem;\n        cursor: pointer;\n\n        &:hover, &.active {\n          background: var(--line-color);\n        }\n      }\n    }\n  }\n"])))),L=t(60954),B=t(17082),J=function(){var e=(0,v.Z)(x().mark((function e(n){return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",window.crypto.subtle.importKey("raw",n,"PBKDF2",!1,["deriveKey"]));case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),V=function(){var e=(0,v.Z)(x().mark((function e(n,t,r){return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",window.crypto.subtle.deriveKey(r,n,{name:"AES-GCM",length:256},!1,t));case 1:case"end":return e.stop()}}),e)})));return function(n,t,r){return e.apply(this,arguments)}}(),W=function(){var e=(0,v.Z)(x().mark((function e(n,t){var r,o,i,a,s,c,l,u,p;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=new Uint8Array(n),o=(new TextEncoder).encode(t),i=window.crypto.getRandomValues(new Uint8Array(16)),a=window.crypto.getRandomValues(new Uint8Array(12)),e.next=7,J(o);case 7:return s=e.sent,e.next=10,V(s,["encrypt"],{name:"PBKDF2",salt:i,iterations:25e4,hash:"SHA-256"});case 10:return c=e.sent,e.next=13,window.crypto.subtle.encrypt({name:"AES-GCM",iv:a},c,r);case 13:return l=e.sent,u=new Uint8Array(l),(p=new Uint8Array(u.byteLength+i.byteLength+a.byteLength)).set(i,0),p.set(a,i.byteLength),p.set(u,i.byteLength+a.byteLength),e.abrupt("return",p);case 22:throw e.prev=22,e.t0=e.catch(0),console.error("Error encrypting file"),console.error(e.t0),e.t0;case 27:case"end":return e.stop()}}),e,null,[[0,22]])})));return function(n,t){return e.apply(this,arguments)}}(),K=function(){var e=(0,v.Z)(x().mark((function e(n,t){var r,o,i,a,s,c,l,u;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=new Uint8Array(n),o=(new TextEncoder).encode(t),i=r.slice(0,16),a=r.slice(16,28),s=r.slice(28),e.next=8,J(o);case 8:return c=e.sent,e.next=11,V(c,["decrypt"],{name:"PBKDF2",salt:i,iterations:25e4,hash:"SHA-256"});case 11:return l=e.sent,e.next=14,window.crypto.subtle.decrypt({name:"AES-GCM",iv:a},l,s);case 14:return u=e.sent,e.abrupt("return",u);case 18:return e.prev=18,e.t0=e.catch(0),console.error("Error decrypting file"),console.error(e.t0),e.abrupt("return");case 23:case"end":return e.stop()}}),e,null,[[0,18]])})));return function(n,t){return e.apply(this,arguments)}}();function $(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function q(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?$(Object(t),!0).forEach((function(n){(0,g.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):$(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function Y(e,n){var t="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=function(e,n){if(!e)return;if("string"===typeof e)return X(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return X(e,n)}(e))||n&&e&&"number"===typeof e.length){t&&(e=t);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==t.return||t.return()}finally{if(s)throw i}}}}function X(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}var Q=function(){};var ee=a.memo((0,N.ZP)((function(e){var n=e.className,t=e.uc,r=e.file,o=e.onClose,c=void 0===o?Q:o,l=e.onSuccess,u=void 0===l?Q:l,p=e.user,f=(0,d.$)().t,m=k(),h=m.endpoint,g=m.endpoints,b=m.onChangeEndpoint,y=function(){var e=(0,d.$)().t,n=(0,a.useMemo)((function(){return function(e){return[{text:e("Crust Pinner"),value:"https://pin.crustcode.com"}]}(e).sort((function(){return Math.random()>.5?-1:1})).map((function(e){var n;return Z(Z({},e),{},{text:"".concat(null!==(n=e.text)&&void 0!==n?n:"Pinner")})}))}),[e]),t=(0,a.useState)(n[0]),r=t[0],o=t[1],i=(0,a.useCallback)((function(e,t){var r=t.value,i=n.find((function(e){return e.value===r}));i&&o(i)}),[n]);return(0,a.useMemo)((function(){return{pinner:r,pins:n,setPinner:o,onChangePinner:i}}),[r,n,i])}(),j=y.onChangePinner,N=y.pinner,A=y.pins,E=(0,a.useState)(!1),_=E[0],D=E[1],z=(0,a.useMemo)((function(){var e=104857600;if(r.file)return r.file.size>e;if(r.files){var n,t=0,o=Y(r.files);try{for(o.s();!(n=o.n()).done;){t+=n.value.size}}catch(i){o.e(i)}finally{o.f()}return t>e}return!1}),[r]),T=(0,a.useState)(""),M=T[0],I=T[1],U=z?f("Do not upload files larger than 100MB!"):M,R=(0,a.useState)({progress:0,up:!1}),J=R[0],V=R[1],K=(0,a.useState)(null),$=K[0],X=K[1],ee=(0,F.O)(),ne=(0,i.Z)(ee,2),te=ne[0],re=ne[1],oe=(0,a.useCallback)((function(){$&&$.cancel(),c()}),[$,c]),ie=(0,a.useCallback)((0,v.Z)(x().mark((function e(){var n,o,i,a,c,l,d,m,g,v,b,y,j,Z,k,C,P,O,S,A,E,F,_,z,T,M,H,U,R;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(I(""),p.account&&p.sign){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,D(!0),n=(0,s.WJ)(p),o="near"===p.wallet?p.pubKey||"":p.account,e.next=9,p.sign(o,p.account);case 9:if(i=e.sent,a="elrond"===p.wallet?i:"".concat(n,"-").concat(o,":").concat(i),c=window.btoa(a),l="Basic ".concat(c),d="Bearer ".concat(c),m=w().CancelToken.source(),X(m),V({progress:0,up:!0}),g=new FormData,!(v=!(!te||!t.secret))){e.next=57;break}if(!r.file){e.next=31;break}return e.next=23,(0,B.vZ)(r.file);case 23:return b=e.sent,e.next=26,W(b,t.secret);case 26:y=e.sent,j=new Blob([y],{type:r.file.type}),g.append("file",j,r.file.name),e.next=55;break;case 31:if(!r.files){e.next=55;break}Z=Y(r.files),e.prev=33,Z.s();case 35:if((k=Z.n()).done){e.next=47;break}return C=k.value,e.next=39,(0,B.vZ)(C);case 39:return P=e.sent,e.next=42,W(P,t.secret);case 42:O=e.sent,S=new Blob([O],{type:C.type}),g.append("file",S,C.webkitRelativePath);case 45:e.next=35;break;case 47:e.next=52;break;case 49:e.prev=49,e.t0=e.catch(33),Z.e(e.t0);case 52:return e.prev=52,Z.f(),e.finish(52);case 55:e.next=58;break;case 57:if(r.file)g.append("file",r.file,r.file.name);else if(r.files){A=Y(r.files);try{for(A.s();!(E=A.n()).done;)F=E.value,g.append("file",F,F.webkitRelativePath)}catch(x){A.e(x)}finally{A.f()}}case 58:return _=h.value,e.next=61,w().request({cancelToken:m.token,data:g,headers:{Authorization:l},maxContentLength:104857600,method:"POST",onUploadProgress:function(e){var n=e.loaded/e.total;V({progress:Math.round(99*n),up:!0})},params:{pin:!0},url:"".concat(_,"/api/v0/add")});case 61:return"string"===typeof(z=e.sent).data?(M=z.data.replaceAll("}\n{","},{"),H=JSON.parse("[".concat(M,"]")),U=H.length-1,T=H[U],delete H[U],T.items=H):T=z.data,console.info("upResult:",z),X(null),V({progress:100,up:!1}),R=N.value,e.next=69,w().request({data:{cid:T.Hash,name:T.Name},headers:{Authorization:d},method:"POST",url:"".concat(R,"/psa/pins")});case 69:u(q(q({},T),{},{PinEndpoint:R,PinTime:(new Date).getTime(),UpEndpoint:_,Encrypted:v})),e.next=78;break;case 72:e.prev=72,e.t1=e.catch(3),V({progress:0,up:!1}),D(!1),console.error(e.t1),I(f("Network Error,Please try to switch a Gateway."));case 78:case"end":return e.stop()}}),e,null,[[3,72],[33,49,52,55]])}))),[p,r,N,h,te,u,f]);return(0,H.jsxs)(C.Z,{closeIcon:!0,onClose:oe,open:!0,size:"large",className:n,children:[(0,H.jsx)(C.Z.Header,{children:f(r.dir?"Upload Folder":"Upload File")}),(0,H.jsxs)(C.Z.Content,{children:[(0,H.jsxs)(P.Z.Group,{children:[(0,H.jsx)(P.Z,{fluid:!0,children:(0,H.jsxs)(P.Z.Content,{children:[(0,H.jsx)(P.Z.Header,{content:r.dir?"Folder":"File"}),(0,H.jsx)(P.Z.Description,{content:r.dir?"".concat(r.dir," (").concat(r.files.length," files)"):"".concat(r.file.name," (").concat(r.file.size," bytes)")})]})}),(0,H.jsx)(P.Z,{fluid:!0,children:(0,H.jsx)(G,{fluid:!0,selection:!0,help:f("File streaming and wallet authentication will be processed by the chosen gateway."),disabled:_,label:f("Select a Web3 IPFS Gateway"),onChange:b,options:g,defaultGroup:h.group,defaultValue:h.value})}),(0,H.jsx)(P.Z,{fluid:!0,children:(0,H.jsx)(G,{fluid:!0,selection:!0,help:f("Your file will be pinned to IPFS for long-term storage."),disabled:0===A.length,label:f("Select a Web3 IPFS Pinner"),onChange:j,options:A,defaultValue:N.value})}),r.file&&(0,H.jsx)(P.Z,{fluid:!0,className:"encryption",children:(0,H.jsxs)(P.Z.Content,{children:[(0,H.jsx)(P.Z.Header,{content:"File Encryption"}),(0,H.jsx)(P.Z.Description,{content:te?"Yes":"No"}),(0,H.jsx)(O.Z,{toggle:!0,defaultChecked:te,disabled:!t.secret,onChange:function(){return re()}})]})})]}),U&&(0,H.jsx)("div",{style:{color:"orangered",padding:"1rem",whiteSpace:"pre-wrap",wordBreak:"break-all"},children:U})]}),(0,H.jsx)(C.Z.Actions,{children:(0,H.jsxs)("div",{className:"uploading",children:[J.up&&(0,H.jsx)(S.Z,{value:J.progress,total:100,active:!0,color:"orange"}),J.up&&(0,H.jsx)(L.Z,{onClick:oe,children:f("Cancel")}),!J.up&&(0,H.jsx)(L.Z,{fluid:!0,onClick:ie,children:f("Sing and Upload")})]})})]})}))(R||(R=(0,r.Z)(['\n\n  .header:nth-child(2) {\n    height: 3.36rem;\n    font-size: 1rem !important;\n    padding: 0 1rem !important;\n    font-weight: unset !important;\n    line-height: 3.36rem !important;\n  }\n\n\n  .close.icon {\n    top: 0.5rem;\n    right: 0.6rem;\n    color: #666666;\n  }\n\n  .content {\n    padding: 1rem !important;\n  }\n\n  .ui.cards > .card {\n    margin: 0.5rem !important;\n\n    .content > .header {\n      font-size: 1.14rem;\n      font-weight: unset !important;\n    }\n\n    .content > .description {\n      font-size: 1rem;\n    }\n  }\n\n  .ui.cards > .card:first-child {\n    margin-top: 1rem !important;\n  }\n\n  .actions {\n    height: 4.8rem;\n    padding: 0.5rem 1rem 0 1rem !important;\n    border-top: unset !important;\n    background: unset !important;\n\n    .button {\n      margin-left: unset !important;\n    }\n  }\n\n  .uploading {\n    height: 4rem;\n    display: flex;\n    align-items: center;\n\n    .progress {\n      margin: 0 1rem 0 0 !important;\n      vertical-align: baseline;\n      background: unset !important;\n      border: 1px solid orange;\n      flex: 1;\n\n      .bar {\n        min-width: unset !important;\n        height: 2.5rem;\n      }\n    }\n  }\n\n  .card.encryption {\n    position: relative;\n\n    .toggle {\n      position: absolute;\n      top: calc(50% - 0.75rem);\n      right: 1rem;\n\n      input[type="radio"]:checked + label:before {\n        background-color: #2ED158 !important;\n      }\n    }\n  }\n'])))),ne=t(12752),te=t(56290);var re,oe=t(56755),ie=t.n(oe),ae=t(20478),se=t(66103),ce=t(98278);function le(e){return e}function ue(e){e.current.isActive=!1,e.current.subscriber&&(e.current.subscriber.then((function(e){return e()})).catch(console.error),e.current.subscriber=null)}function pe(e,n,t){var r=function(){var e=(0,a.useRef)(!1);return(0,a.useEffect)((function(){return e.current=!0,function(){e.current=!1}}),[]),e}(),s=(0,a.useRef)({isActive:!1,serialized:null,subscriber:null}),c=(0,a.useState)((t||{}).defaultValue),l=c[0],u=c[1];return(0,a.useEffect)((function(){return function(){return ue(s)}}),[]),(0,a.useEffect)((function(){if(r.current&&e){var a=function(e,n){var t=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).paramMap,r=void 0===t?le:t;return[JSON.stringify({f:null===e||void 0===e?void 0:e.name,p:n}),0!==n.length&&n.some((function(e){return(0,se.F)(e)||(0,ce.o)(e)}))?null:r(n)]}(e,n||[],t),c=(0,i.Z)(a,2),l=c[0],p=c[1];p&&l!==s.current.serialized&&(s.current.serialized=l,function(e,n,t,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},s=a.transform,c=void 0===s?le:s,l=a.withParams,u=a.withParamsTransform,p=r.filter((function(e){return!(0,ce.o)(e)}));ue(n),setTimeout((function(){var a;e.current&&(!t||t.meta&&null!==(a=t.meta.type)&&void 0!==a&&a.isDoubleMap&&2!==p.length?n.current.subscriber=null:(n.current.isActive=!0,n.current.subscriber=t.apply(void 0,(0,o.Z)(r).concat([function(t){e.current&&n.current.isActive&&e.current&&n.current.isActive&&i(l?[r,c(t)]:c(u?[r,t]:t))}]))))}),0)}(r,s,e,p,u,t))}}),[e,t,r,n]),l}function de(e,n){var t=n.find((function(n){return n.value===e.UpEndpoint})),r=t&&t.value||n[0].value;return"".concat(r,"/ipfs/").concat(e.Hash,"?filename=").concat(e.Name)}var fe=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6;return e.length>2*n?"".concat(e.substr(0,n),"...").concat(e.substr(e.length-n)):e};var me,he=a.memo((0,N.ZP)((function(e){var n,t,r=e.file,o=e.className,i=e.uc,s=(0,ae.V)(),c=(0,a.useContext)(ne.I),l=c.api,p=c.alert,d=k().endpoints,f=(0,a.useCallback)((0,v.Z)(x().mark((function e(){var n,t,o;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r.Encrypted||0!==z().size(r.items)){e.next=23;break}if(e.prev=1,i.secret){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,w().get(de(r,d),{responseType:"arraybuffer"});case 6:return n=e.sent,console.info("res::",n),e.next=10,K(n.data,i.secret);case 10:if(t=e.sent){e.next=13;break}throw"error";case 13:console.info("de:",t),o=URL.createObjectURL(new File([t],r.Name,{type:n.headers["content-type"]})),window.open(o,"_blank"),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(1),p.error("decrypt error");case 21:e.next=24;break;case 23:window.open(de(r,d),"_blank");case 24:case"end":return e.stop()}}),e,null,[[1,18]])}))),[i,r,d]),m=(0,a.useCallback)((function(){return s(de(r,d))}),[r,d]),h=l&&(null===(n=l.query)||void 0===n?void 0:n.market)&&(null===(t=l.query)||void 0===t?void 0:t.market.files),g=!!h,b=pe(h,[r.Hash]),y=pe(l&&l.derive.chain.bestNumber);y=y&&JSON.parse(JSON.stringify(y));var j={status:"Loading"};if(b){var Z=JSON.parse(JSON.stringify(b));if(Z){var C=Z.expired_at,P=Z.reported_replica_count;j.expireTime=Z.expired_at,j.amount=Z.amount,j.startTime=Z.expired_at?Z.expired_at-216e3:0,j.fileSize=Z.file_size,j.confirmedReplicas=Z.reported_replica_count,j.prepaid=Z.prepaid,C&&C<y&&(j.status="Expired"),!C&&C>y&&P<1&&(j.status="Waiting"),C&&C>y&&P>0&&(j.status="Success")}else g&&r.PinTime-(new Date).getTime()>=72e5?j.status="Failed":j.status="Waiting"}return(0,H.jsxs)(u.Z.Row,{className:o,children:[(0,H.jsxs)(u.Z.Cell,{children:[fe(r.Name)," ",r.Encrypted&&(0,H.jsx)(A.Z,{name:"lock"})]}),(0,H.jsxs)(u.Z.Cell,{textAlign:"center",children:[fe(r.Hash),(0,H.jsx)("span",{onClick:function(){return s(r.Hash)},style:{cursor:"pointer",paddingLeft:10},children:(0,H.jsx)(A.Z,{name:"clone outline"})})]}),(0,H.jsx)(u.Z.Cell,{textAlign:"center",children:ie()(Number(r.Size),{round:2})}),(0,H.jsxs)(u.Z.Cell,{textAlign:"center",children:["Loading"===j.status&&(0,H.jsx)(A.Z,{loading:!0,name:"spinner"}),"Waiting"===j.status&&j.status,"Expired"===j.status&&j.status,"Failed"===j.status&&j.status,"Success"===j.status&&"".concat(j.status," (").concat(j.confirmedReplicas," replicas)")]}),(0,H.jsxs)(u.Z.Cell,{textAlign:"center",children:[(0,H.jsx)("span",{style:{cursor:"pointer"},onClick:f,children:(0,H.jsx)(A.Z,{name:"external"})}),(0,H.jsx)("span",{style:{cursor:"pointer"},onClick:m,children:(0,H.jsx)(A.Z,{name:"clone outline"})})]})]})}))(re||(re=(0,r.Z)(["\n  color: var(--secend-color) !important;\n"]))));function ge(e,n){var t="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=function(e,n){if(!e)return;if("string"===typeof e)return ve(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return ve(e,n)}(e))||n&&e&&"number"===typeof e.length){t&&(e=t);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){function n(n){return e.apply(this,arguments)}return n.toString=function(){return e.toString()},n}((function(e){throw e})),f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return a=e.done,e},e:function(e){function n(n){return e.apply(this,arguments)}return n.toString=function(){return e.toString()},n}((function(e){s=!0,i=e})),f:function(){try{a||null==t.return||t.return()}finally{if(s)throw i}}}}function ve(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}var be=a.memo((0,N.ZP)((function(e){var n=(0,s.WY)(),t=(0,d.$)().t,r=(0,a.useContext)(ne.I).alert,m=(0,a.useState)(!1),g=m[0],v=m[1],b=(0,s.Yg)(),x=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,t=(0,a.useState)(1),r=t[0],o=t[1];return(0,a.useMemo)((function(){var t=z().chunk(e,n);return{totalPage:t.length,pageList:t[r-1]||[],setPage:o,page:r}}),[e,r])}(b.files,5),y=(0,a.useState)(void 0),w=y[0],j=y[1],Z=(0,a.useRef)(null),k=(0,B.MH)(),C=(0,a.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];Z.current&&(Z.current.webkitdirectory=e,Z.current.multiple=e,Z.current.click())}),[Z]),P=(0,a.useCallback)((function(){return C(!1)}),[C]),O=(0,a.useCallback)((function(){return C(!0)}),[C]),S=(0,a.useCallback)((function(e){var n=e.target.files;if(n)if(n.length>2e3)r.alert({title:t("Upload"),msg:t("Please do not upload more than 2000 files"),type:"error"});else if(0!==n.length){if(e.target.webkitdirectory){if(n.length>=1){for(var o=[],a=0;a<n.length;a++)o.push(n[a]);console.info(o);var s=o[0].webkitRelativePath.split("/"),c=(0,i.Z)(s,1)[0];j({files:o,dir:c}),v(!0)}}else j({file:n[0]}),v(!0);e.target.value=""}else r.alert({title:t("Upload"),msg:t("Please select non-empty folder"),type:"error"})}),[j,v,r,t]),N=(0,a.useRef)(null),A=(0,a.useCallback)((function(){N.current&&N.current.click()}),[N]),E=(0,a.useCallback)((function(e){try{var n=new FileReader,i=e.target.files;if(!i)return;if(n.readAsText(i[0],"UTF-8"),!/(.json)$/i.test(e.target.value))return r.alert({msg:t("File error"),type:"error"});n.onload=function(e){var n,i=JSON.parse(null===(n=e.target)||void 0===n?void 0:n.result);if(!Array.isArray(i))return r.alert({msg:t("File content error"),type:"error"});var a,s=[],c={},l=ge(i);try{for(l.s();!(a=l.n()).done;){var u=a.value;u.Hash&&u.Name&&u.UpEndpoint&&u.PinEndpoint&&(s.push(u),c[u.Hash]=!0)}}catch(d){l.e(d)}finally{l.f()}var p=b.files.filter((function(e){return!c[e.Hash]}));b.setFiles([].concat(s,(0,o.Z)(p))),r.alert({msg:t("Import Success"),type:"success"})}}catch(e){r.alert({msg:t("File content error"),type:"error"})}}),[b,r,t]),F=(0,a.useCallback)((function(){v(!1)}),[]),_=(0,a.useCallback)((function(e){v(!1);var n=b.files.filter((function(n){return n.Hash!==e.Hash}));b.setFiles([e].concat((0,o.Z)(n)))}),[b]),D=(0,a.useCallback)((function(){var e=new Blob([JSON.stringify(b.files)],{type:"application/json; charset=utf-8"});h().saveAs(e,"files.json")}),[b]);return(0,H.jsx)(f.Z,{path:"/files",children:(0,H.jsxs)(c.Z,{basic:!0,className:e.className,children:[(0,H.jsx)(te.Z,{}),(0,H.jsxs)(c.Z,{basic:!0,textAlign:"center",className:"font1 uploadPanel",children:[(0,H.jsx)("input",{onChange:S,ref:Z,style:{display:"none"},type:"file"}),(0,H.jsx)("input",{onChange:E,ref:N,style:{display:"none"},type:"file"}),(0,H.jsx)("span",{children:"Upload"}),(0,H.jsx)(l.Z,{animation:"jiggle",duration:800,visible:!0,children:(0,H.jsx)("span",{className:"btn file",onClick:P,children:"File"})}),(0,H.jsx)("span",{children:"or"}),(0,H.jsx)(l.Z,{animation:"jiggle",duration:800,visible:!0,children:(0,H.jsx)("span",{className:"btn folder",onClick:O,children:"Folder"})}),(0,H.jsx)("span",{children:"to IPFS."}),g&&(0,H.jsx)(ee,{file:w,user:n,onClose:F,onSuccess:_,uc:k})]}),(0,H.jsx)("span",{className:"font1 filesTitle",children:"Upload History"}),(0,H.jsxs)(u.Z,{basic:"very",singleLine:!0,children:[(0,H.jsx)(u.Z.Header,{children:(0,H.jsxs)(u.Z.Row,{children:[(0,H.jsx)(u.Z.HeaderCell,{children:"File Name"}),(0,H.jsx)(u.Z.HeaderCell,{textAlign:"center",children:"File CID"}),(0,H.jsx)(u.Z.HeaderCell,{textAlign:"center",children:"File Size"}),(0,H.jsx)(u.Z.HeaderCell,{textAlign:"center",children:"Status"}),(0,H.jsx)(u.Z.HeaderCell,{textAlign:"center",children:"Action"})]})}),(0,H.jsx)(u.Z.Body,{children:x.pageList.map((function(e,n){return(0,H.jsx)(he,{uc:k,file:e},"files_".concat(n))}))}),(0,H.jsx)(u.Z.Footer,{children:(0,H.jsxs)(u.Z.Row,{children:[(0,H.jsxs)(u.Z.HeaderCell,{colSpan:x.totalPage>1?2:5,children:[(0,H.jsx)(L.Z,{onClick:A,children:"Import"}),(0,H.jsx)(L.Z,{onClick:D,children:"Export"})]}),x.totalPage>1&&(0,H.jsx)(u.Z.HeaderCell,{colSpan:"3",textAlign:"right",children:(0,H.jsx)(p.Z,{totalPages:x.totalPage,activePage:x.page,onPageChange:function(e,n){var t=n.activePage;return x.setPage(t)}})})]})})]})]})})}))(me||(me=(0,r.Z)(["\n  padding: unset !important;\n\n  .table {\n    padding: 1rem 2rem;\n\n    thead {\n      font-size: 1.3rem;\n    }\n  }\n\n\n  .uploadPanel {\n    font-size: 5rem !important;\n    line-height: 17.14rem;\n    white-space: nowrap;\n    padding: 2rem 1rem;\n\n    .btn {\n      display: inline-block;\n      width: 18.57rem;\n      height: 17.14rem;\n      text-align: center;\n      margin: 0 10px;\n      border-radius: 50px;\n      cursor: pointer;\n      //transition: all ease-in-out 2s;\n    }\n\n    .file {\n      background: rgba(255, 141, 0, 0.1);\n\n      &:hover {\n        background: rgba(255, 141, 0, 0.2);\n      }\n    }\n\n    .folder {\n      background: rgba(86, 203, 143, 0.1);\n\n      &:hover {\n        background: rgba(86, 203, 143, 0.2);\n      }\n    }\n  }\n\n  .filesTitle {\n    font-size: 2.8rem;\n    margin-left: 2rem;\n    line-height: 60px;\n  }\n"]))))},62356:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/files",function(){return t(52142)}])}},function(e){e.O(0,[910,157,24,66,764,774,888,179],(function(){return n=62356,e(e.s=n);var n}));var n=e.O();_N_E=n}]);