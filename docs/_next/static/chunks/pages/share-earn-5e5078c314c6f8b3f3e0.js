(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[370],{12107:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return S}});var r=t(80318),s=t(67294),i=t(23499),a=t(35766),c=t(29163),o=t(60954),l=t(92809),d=t(10219),u=t(94184),m=t.n(u),f=t(21004),p=t(65058),h=t(85893),j=["className","title","defActive","content"];function b(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function g(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?b(Object(t),!0).forEach((function(n){(0,l.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):b(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var x=s.memo((0,c.ZP)((function(e){var n=e.className,t=e.title,s=e.defActive,i=void 0!==s&&s,a=e.content,c=(0,d.Z)(e,j),o=(0,p.O)(i),l=(0,r.Z)(o,2),u=l[0],b=l[1];return(0,h.jsxs)(f.Z,g(g({className:n},c),{},{children:[(0,h.jsx)(f.Z.Title,{active:u,onClick:function(){return b()},children:(0,h.jsxs)("div",{className:"title font-sans-semibold",children:[t,(0,h.jsx)("span",{className:m()("icon",u?"cru-fo-chevron-up":"cru-fo-chevron-down")})]})}),(0,h.jsx)(f.Z.Content,{active:u,children:a})]}))})).withConfig({displayName:"MAccordion",componentId:"sc-1uwsz4-0"})([""])),v=t(8670),w=t(60649),y=t(43913),O=t(12752),N=t(96705),P=t(75282);function C(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function Z(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?C(Object(t),!0).forEach((function(n){(0,l.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):C(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var E=t(34111),R=t(45129),_=t(99056);var S=s.memo((0,c.ZP)((function(e){var n=e.className,t=(0,i.$)().t,c=(0,N.WY)(),l="crust"===c.wallet,d=(0,E.X)((function(){return(0,R.Y1)(c.account)}),[c.account]),u=(0,r.Z)(d,2),m=u[0],f=(u[1],m&&m.deposit&&m.deposit.id),p=l&&(c.member&&1===c.member.member_state||f),j=function(){var e=(0,O.qD)(),n=e.api,t=e.alert,r=e.loading,i=(0,N.WY)(),a=(0,s.useState)(!1),c=a[0],o=a[1],l=(0,s.useState)(!1),d=l[0],u=l[1];return(0,s.useEffect)((function(){o(!1),i.account&&"crust"===i.wallet&&n&&i.crust.wallet&&o(!0)}),[n,i]),{start:function(){if(c){r.show(),u(!1);var e=Z(Z({},i.crust.wallet.signer),{},{signPayload:function(e){return console.info("payload:",e),i.crust.wallet.signer.signPayload(e)}});n.setSigner(e),n.tx.system.remark(JSON.stringify({scope:"crustFiles",env:P.g6,action:"claimRewards"})).signAndSend(i.account,{nonce:-1,tip:0},(function(e){n.setSigner(void 0),e.status.isInBlock&&(r.hide(),u(!0))})).catch((function(e){"string"===typeof e?t.error(e):console.error(e),r.hide()}))}},ready:c,finish:d}}(),b=(0,E.X)((function(){return(0,R.rS)(c.account)}),[c.account]),g=(0,r.Z)(b,2),C=g[0],S=g[1];(0,s.useEffect)((function(){S()}),[j.finish]);var k=C&&C.pendingReward,D=(0,s.useMemo)((function(){return(0,_.vr)("".concat((null===C||void 0===C?void 0:C.pendingReward)||"0"))}),[C]),I=(0,s.useMemo)((function(){return(0,_.vr)("".concat((null===C||void 0===C?void 0:C.claimedReward)||"0"))}),[C]),M=(0,s.useMemo)((function(){return C&&C.totalInvition}),[C]),z=j.finish||C&&C.claimOngoing,U=!j.ready||!k||z;return(0,h.jsx)(w.Z,{path:"/share-earn",children:(0,h.jsxs)(a.Z,{basic:!0,className:n,children:[(0,h.jsx)(y.Z,{}),(0,h.jsxs)(a.Z,{basic:!0,className:"mcontent",children:[(0,h.jsxs)("div",{className:"share-and-earn",children:[(0,h.jsx)("img",{src:"/images/share_earn2.png"}),(0,h.jsxs)("div",{className:"text",children:["Share files to your friends and invite them to use ",(0,h.jsx)("span",{children:"Crust Files"}),". Enjoy and Earn ",(0,h.jsx)("span",{children:"$CRU"})," !!!"]})]}),(0,h.jsx)(v.o,{children:(0,h.jsx)(x,{title:"How to Share-and-Earn?"})}),(0,h.jsx)(v.o,{children:(0,h.jsx)(x,{title:"Learn about more detailed rules"})}),(0,h.jsx)(v.o,{children:(0,h.jsx)(x,{title:"Get Crust Wallet and CRU"})}),p&&(0,h.jsxs)(v.o,{children:[(0,h.jsx)("div",{className:"title font-sans-semibold",children:t("My REwards")}),(0,h.jsxs)("div",{className:"text font-sans-regular",children:["Pending Claim Rewards : ",(0,h.jsx)("span",{className:"b-text",children:"".concat(D," CRU")}),"Claimed Rewards : ",(0,h.jsx)("span",{className:"b-text",children:"".concat(I," CRU")}),"Valid Invition : ",(0,h.jsx)("span",{className:"b-text",children:M})]}),(0,h.jsxs)("div",{className:"btns mbtns",children:[(0,h.jsx)(o.Z,{content:t(z?"Ongoing Claim...":"Claim Rewards"),disabled:U,onClick:function(){j.start()}}),z&&(0,h.jsx)("span",{className:"tip",children:"Claim will be done on a daily basis, please check your balance in 24 hours."})]})]}),!p&&(0,h.jsxs)(v.o,{children:[(0,h.jsx)("div",{className:"title font-sans-semibold",children:t("My REwards")}),(0,h.jsxs)("div",{className:"text font-sans-regular",children:["Total Rewards : ",(0,h.jsx)("span",{className:"b-text",children:"".concat(D," CRU")}),"Valid Invition : ",(0,h.jsx)("span",{className:"b-text",children:M})]}),(0,h.jsx)("div",{className:"btns mbtns",children:(0,h.jsx)(o.Z,{content:t("Get Premium"),onClick:function(){}})})]})]})]})})})).withConfig({displayName:"share-earn",componentId:"sc-59zcdp-0"})(["padding:unset !important;.mcontent{margin:unset !important;padding:0 0 3rem 0 !important;overflow:auto;.share-and-earn{margin:2.21rem 2.29rem 0 2.39rem;border:2px solid #000000;border-radius:16px;display:flex;align-items:center;padding:1.428571rem 3.571429rem;img{width:16.214286rem;height:auto;margin-right:2.142857rem;}.text{font-size:2.571429rem;line-height:3.5rem;font-weight:600;span{color:var(--primary-color);}}}.mcard{.ui.accordion{.title{padding:unset !important;}}.b-text{color:var(--primary-color);font-size:18px;font-weight:600;margin-right:4.285714rem;}.mbtns{button{min-width:16.428571rem;}.tip{margin-left:9px;font-size:10px;color:#999999;}}}}"]))},3783:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/share-earn",function(){return t(12107)}])}},function(e){e.O(0,[610,951,12,843,774,888,179],(function(){return n=3783,e(e.s=n);var n}));var n=e.O();_N_E=n}]);