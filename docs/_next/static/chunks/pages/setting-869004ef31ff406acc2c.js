(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[552],{17082:function(e,n,t){"use strict";t.d(n,{vZ:function(){return g},hC:function(){return b},MH:function(){return v}});var r=t(92809),s=t(30266),o=t(80318),a=t(809),i=t.n(a),c=t(67294),l=t(58971),u=t.n(l),f=t(65058);function m(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function d(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?m(Object(t),!0).forEach((function(n){(0,r.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):m(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var p=t(21994).Cypher,h=new p(8),g=function(e){return new Promise((function(n,t){var r=new FileReader;r.onload=function(){r.result&&n(r.result)},r.onerror=t,r.readAsArrayBuffer(e)}))};function b(e){try{var n=e&&e.trim();if(n){var t=n.split(" ");if(1===t.length&&t[0]){var r=t[0],s=window.atob(r),o=h.phraseFromSecret(s);if(o&&o.split(" ").length>=4)return{secret:r,seeds:o}}else if(t.length>=4){var a=h.secretFromPhrase(n);if(a&&a.split("-").length>=4)return{secret:window.btoa(a),seeds:n}}}return null}catch(i){return null}}function v(){var e=(0,c.useState)({}),n=e[0],t=e[1],r=(0,f.O)(),a=(0,o.Z)(r,2),l=a[0],m=a[1];(0,c.useEffect)((function(){var e=u().get("user:crypto");e&&t(e),m(!0)}),[]);var h=(0,c.useCallback)((function(e){t(e),u().set("user:crypto",e)}),[]),g=(0,c.useCallback)((0,s.Z)(i().mark((function e(){var n,t,r,s,o;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new p(8),t=n.genMnemonics(),r=t.secret,s=t.mnemonics,o={secret:window.btoa(r),seeds:s},console.info("length:",r.length,o.secret.length),h(o),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)}))),[]);return(0,c.useMemo)((function(){return d(d({},n),{},{generate:g,set:h,init:l})}),[n,h,l,g])}},20478:function(e,n,t){"use strict";t.d(n,{V:function(){return i}});var r=t(67294),s=t(12752),o=t(20640),a=t.n(o);function i(){var e=(0,r.useContext)(s.Il).alert;return(0,r.useCallback)((function(n){a()(n),e.alert({msg:"Copied",type:"success"})}),[e])}},8130:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return U}});var r,s=t(52209),o=t(83789),a=t(80318),i=t(94184),c=t.n(i),l=t(93162),u=t.n(l),f=t(67294),m=t(23499),d=t(35766),p=t(21004),h=t(49147),g=t(27416),b=t(29163),v=t(60954),y=t(92809),j=t(10219),x=t(345),w=t(60416),O=t(17082),N=t(85893),k=["alert","onSuccess","toggleOpen"];function C(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function P(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?C(Object(t),!0).forEach((function(n){(0,y.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):C(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var Z,E=f.memo((0,b.ZP)((function(e){var n=e.alert,t=e.onSuccess,r=e.toggleOpen,s=(0,j.Z)(e,k),o=(0,f.useState)(""),a=o[0],i=o[1],c=(0,f.useCallback)((function(e,n){var t=n.value;i(t)}),[]),l=(0,f.useCallback)((function(){var e=(0,O.hC)(a);e?(t(e),r(!1)):n.error("Please check input value")}),[a,n]),u=(0,f.useCallback)((function(){i(""),r(!1)}),[]);return(0,N.jsxs)(x.Z,P(P({closeIcon:(0,N.jsx)("span",{className:"close icon cru-fo-x"}),onClose:u},s),{},{children:[(0,N.jsx)(x.Z.Header,{content:"Input a new key"}),(0,N.jsxs)(x.Z.Content,{children:[(0,N.jsx)(w.Z,{fluid:!0,onChange:c}),(0,N.jsxs)("div",{className:"btns",children:[(0,N.jsx)(v.Z,{content:"Input",onClick:l}),(0,N.jsx)(v.Z,{content:"Cancel",onClick:function(){return r(!1)}})]})]})]}))}))(r||(r=(0,s.Z)(["\n  width: 34.3rem !important;\n\n  .header {\n    height: 3.93rem;\n    font-size: 1.3rem !important;\n    padding: 0 1.14rem !important;\n    font-weight: 600 !important;\n    line-height: 3.93rem !important;\n  }\n\n\n  .close.icon {\n    top: 0.5rem;\n    right: 0.6rem;\n    color: #666666;\n  }\n\n  .content {\n    padding: 1rem !important;\n\n    input {\n      border: 0.07rem solid #CCCCCC !important;\n      border-radius: 0.57rem !important;\n    }\n\n    .btns {\n      padding-top: 2.3rem;\n\n      button {\n        width: calc(50% - 0.5rem) !important;\n        margin: unset;\n      }\n\n      button:first-child {\n        margin-right: 1rem;\n      }\n    }\n  }\n"])))),S=t(60649),_=t(43913),F=t(12752),M=t(20478),A=t(65058),I=t(96705);function D(e,n){var t="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=function(e,n){if(!e)return;if("string"===typeof e)return W(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return W(e,n)}(e))||n&&e&&"number"===typeof e.length){t&&(e=t);var r=0,s=function(){};return{s:s,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){function n(n){return e.apply(this,arguments)}return n.toString=function(){return e.toString()},n}((function(e){throw e})),f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,i=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return a=e.done,e},e:function(e){function n(n){return e.apply(this,arguments)}return n.toString=function(){return e.toString()},n}((function(e){i=!0,o=e})),f:function(){try{a||null==t.return||t.return()}finally{if(i)throw o}}}}function W(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}var T={crust:"Crust Wallet",metamask:"MetaMask","metamask-Polygon":"MetaMask","metamask-Moonriver":"MetaMask","polkadot-js":"Polkadot Extension",near:"Near Wallet",elrond:"Elrond(Maiar Wallet)",flow:"Flow Wallet",solana:"Solana(Phantom Wallet)","wallet-connect":"WalletConnect"};var U=f.memo((0,b.ZP)((function(e){var n=e.className,t=(0,m.$)().t,r=(0,O.MH)(),s=(0,f.useContext)(F.Il).alert,i=(0,A.O)(!1),l=(0,a.Z)(i,2),b=l[0],y=l[1],j=(0,A.O)(),x=(0,a.Z)(j,2),w=x[0],k=x[1],C=(0,M.V)(),P=(0,I.WY)(),Z=(0,f.useMemo)((function(){return P.member&&1===P.member.member_state?"Premium":"Trial"}),[P]),W="crust"===P.wallet,U=(0,I.Yg)(),H=(0,f.useRef)(null),z=(0,f.useCallback)((function(){H.current&&H.current.click()}),[H]),Y=(0,f.useCallback)((function(e){try{var n=new FileReader,a=e.target.files;if(!a)return;if(n.readAsText(a[0],"UTF-8"),!/(.json)$/i.test(e.target.value))return s.error(t("File error"));n.onload=function(e){var n,a=JSON.parse(null===(n=e.target)||void 0===n?void 0:n.result),i={files:[]};if(Array.isArray(a))i.files=a;else{if(!a.files||!Array.isArray(a.files))return s.error(t("File content error"));i.secret=a.secret,i.files=a.files}if(r.secret&&i.secret&&i.secret!==r.secret)return s.error("Two secrets were found, and they are different.");if(i.secret){var c=(0,O.hC)(i.secret);c&&r.set(c)}var l,u=[],f={},m=D(i.files);try{for(m.s();!(l=m.n()).done;){var d=l.value;d.Hash&&d.Name&&d.UpEndpoint&&d.PinEndpoint&&(u.push(d),f[d.Hash]=!0)}}catch(h){m.e(h)}finally{m.f()}var p=U.files.filter((function(e){return!f[e.Hash]}));U.setFiles([].concat(u,(0,o.Z)(p))),s.alert({msg:t("Import Success"),type:"success"})}}catch(e){s.alert({msg:t("File content error"),type:"error"})}}),[U,r.set,s,t]),G=(0,f.useCallback)((function(){var e={files:U.files,secret:r.secret},n=new Blob([JSON.stringify(e)],{type:"application/json; charset=utf-8"});u().saveAs(n,"backup.json")}),[U,r]);return(0,N.jsx)(S.Z,{path:"/setting",children:(0,N.jsxs)(d.Z,{basic:!0,className:n,children:[(0,N.jsx)("input",{onChange:Y,ref:H,style:{display:"none"},type:"file"}),(0,N.jsx)(_.Z,{}),b&&(0,N.jsx)(E,{alert:s,size:"tiny",open:!0,toggleOpen:y,onSuccess:r.set}),(0,N.jsxs)(d.Z,{basic:!0,className:"mcontent",children:[(0,N.jsxs)(d.Z,{basic:!0,className:"mcard",children:[(0,N.jsx)("div",{className:"title font-sans-semibold",children:t("User Profile")}),(0,N.jsxs)("div",{className:"text font-sans-regular",children:["".concat(t("Web3 Identity Logged-in:")," "),(0,N.jsx)("span",{className:"bold-text font-sans-semibold",children:P.account})]}),(0,N.jsxs)("div",{className:"text font-sans-regular",children:["".concat(t("Logged-in Wallet:")," "),(0,N.jsx)("span",{className:"bold-text font-sans-semibold",children:T[P.wallet]})]}),(0,N.jsxs)("div",{className:"text font-sans-regular",children:["".concat(t("Nick Name:")," "),P.nickName&&(0,N.jsx)("span",{className:"bold-text font-sans-semibold",children:P.nickName}),!W&&(0,N.jsx)("a",{className:"",target:"_blank",href:"/docs/CrustFiles_Users",rel:"noreferrer",children:"Get a Nick Name"})]}),(0,N.jsxs)("div",{className:"text font-sans-regular",children:["".concat(t("User Type:")," "),W&&(0,N.jsx)("span",{className:"bold-text font-sans-semibold",children:Z}),!W&&(0,N.jsx)("a",{target:"_blank",href:"/docs/CrustFiles_Users",rel:"noreferrer",children:"Get a Premium"})]})]}),(0,N.jsxs)(d.Z,{basic:!0,className:"mcard",children:[(0,N.jsx)("div",{className:"title font-sans-semibold",children:t("User Data Management")}),(0,N.jsx)("div",{className:"text font-sans-regular",children:"".concat(t("Your user data (including three File Lists and one File Encryption Key) are cached on your local devices. If you want to migrate your user data to a new device, use Export & Import function.")," ")}),(0,N.jsxs)(p.Z,{children:[(0,N.jsx)(h.Z,{active:w,onClick:function(){return k()},children:(0,N.jsxs)("div",{className:"title font-sans-semibold",children:[t("File Encryption"),(0,N.jsx)("span",{className:c()("icon",w?"cru-fo-chevron-up":"cru-fo-chevron-down")})]})}),(0,N.jsxs)(g.Z,{active:w,className:"no-padding",children:[(0,N.jsxs)("div",{className:"text font-sans-regular",children:["".concat(t("Your File Encryption Key:")," "),r.secret&&(0,N.jsxs)("span",{className:"bold-text font-sans-semibold",children:[r.secret,(0,N.jsx)("span",{className:"icon cru-fo-copy",onClick:function(){return C(r.secret)}})]}),!r.secret&&(0,N.jsx)("a",{onClick:r.generate,children:"Generate a New"})]}),r.seeds&&(0,N.jsxs)("div",{className:"text font-sans-regular",children:["".concat(t("Seed Phrase:")," "),(0,N.jsx)("span",{className:"bold-text font-sans-semibold",children:r.seeds})]})]})]}),(0,N.jsxs)("div",{className:"btns",children:[(0,N.jsx)(v.Z,{content:t("Export"),onClick:G}),(0,N.jsx)(v.Z,{content:t("Import"),onClick:z})]})]})]})]})})}))(Z||(Z=(0,s.Z)(["\n  padding: unset !important;\n  .mcontent {\n    margin: unset !important;\n    padding: 0 0 3rem 0 !important;\n    overflow: auto;\n  }\n  .mcard {\n    padding: 1.71rem !important;\n    box-shadow: 0 0.71rem 1.71rem 0 rgba(0, 0, 0, 0.06) !important;\n    border-radius: 1.14rem !important;\n    border: 0.07rem solid #EEEEEE !important;\n    margin: 2.21rem 2.29rem 0 2.39rem !important;\n  \n    .title {\n      font-size: 1.3rem !important;\n      font-weight: 600;\n      color: var(--main-color);\n      padding-bottom: 1.14rem;\n      .cru-fo {\n        margin-right: 0.8rem;\n      }\n    }\n\n    .text {\n      font-size: 1rem;\n      color: var(--secend-color);\n      line-height: 1.57rem;\n    }\n    .icon {\n      margin-left: 1rem;\n      font-size: 1.428571rem;\n      position: relative;\n      top: 3px;\n      cursor: pointer;\n    }\n    .bold-text {\n      color: var(--main-color);\n    }\n    \n    a {\n      text-decoration: underline;\n      line-height: 1.2rem;\n      cursor: pointer;\n    }\n\n    .btns {\n      margin-top: 1.7rem;\n      button:first-child {\n        margin-right: 1rem;\n      }\n    }\n  }\n\n"]))))},63782:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/setting",function(){return t(8130)}])}},function(e){e.O(0,[610,951,615,545,950,774,888,179],(function(){return n=63782,e(e.s=n);var n}));var n=e.O();_N_E=n}]);