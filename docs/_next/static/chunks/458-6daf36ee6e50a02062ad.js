"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[458],{82720:function(e,n,t){t.d(n,{U:function(){return p}});var r,o=t(52209),i=t(67294),a=t(29163),c=t(18538),s=t(94184),l=t.n(s),u=t(85893);var p=i.memo((0,a.ZP)((function(e){var n=e.className,t=e.onClickUpFile,r=e.onClickUpFolder;return r?(0,u.jsx)(c.Z,{className:n,pointing:"top",icon:null,basic:!0,text:"Upload",children:(0,u.jsxs)(c.Z.Menu,{children:[(0,u.jsx)(c.Z.Item,{text:"File",icon:(0,u.jsx)("span",{className:"icon cru-fo-file"}),onClick:t}),(0,u.jsx)(c.Z.Item,{text:"Folder",icon:(0,u.jsx)("span",{className:"icon cru-fo-folder"}),onClick:r})]})}):(0,u.jsx)("div",{className:l()("btn-upload",n),onClick:t,children:"Upload"})}))(r||(r=(0,o.Z)(["\n &.btn-upload, &.ui.dropdown>.text.divider {\n    padding: 0 4.285714rem;\n    font-family: OpenSans-Medium;\n    font-size: 2.571429rem;\n    line-height: 6.428571rem;\n    cursor: pointer;\n    border: 2px solid #000000;\n    box-sizing: border-box;\n    border-radius: 1.714286rem;\n }\n &.ui.dropdown {\n    .cru-fo {\n      font-size: 1.3rem;\n      margin-left: 1.1rem;\n    }\n\n    /* .text.divider {\n        padding: 0 4.285714rem;\n        font-family: OpenSans-Medium;\n        font-size: 2.571429rem;\n        line-height: 6.428571rem;\n        cursor: pointer;\n        border: 2px solid #000000;\n        box-sizing: border-box;\n        border-radius: 1.714286rem;\n    } */\n\n    .menu::after {\n      display: none;\n    }\n\n    .menu {\n      width: 100%;\n      background: #FFFFFF;\n      box-shadow: 0 0.57rem 1.43rem 0 rgba(0, 0, 0, 0.1);\n      border: 1px solid #EEEEEE;\n      border-radius: 0.86rem;\n      padding: 0.57rem;\n      .icon {\n          margin-left: 1.144286rem;\n          margin-right: 1.714286rem;\n      }\n      .item {\n        padding: 0.78rem 0.57rem !important;\n        border-radius: 0.57rem;\n        font-size: 1.285714rem;\n        \n        &:active {\n          background-color: #EEEEEE;\n        }\n      }\n    }\n  }\n"]))))},74346:function(e,n,t){t.d(n,{ZP:function(){return U}});var r=t(52209),o=t(67294),i=t(1300),a=t(71416),c=t(65382),s=t(17082),l=t(96486),u=t.n(l);var p=t(30266),d=t(809),f=t.n(d),m=t(9669),g=t.n(m),h=t(93162),v=t(56755),b=t.n(v),x=t(11163),y=t(28803),w=t(29163),j=t(12752),k=t(54040),Z=t(80318),C=t(83789),P=t(66103),O=t(98278);function S(e){return e}function E(e){e.current.isActive=!1,e.current.subscriber&&(e.current.subscriber.then((function(e){return e()})).catch(console.error),e.current.subscriber=null)}function N(e,n,t){var r=function(){var e=(0,o.useRef)(!1);return(0,o.useEffect)((function(){return e.current=!0,function(){e.current=!1}}),[]),e}(),i=(0,o.useRef)({isActive:!1,serialized:null,subscriber:null}),a=(0,o.useState)((t||{}).defaultValue),c=a[0],s=a[1];return(0,o.useEffect)((function(){return function(){return E(i)}}),[]),(0,o.useEffect)((function(){if(r.current&&e){var o=function(e,n){var t=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).paramMap,r=void 0===t?S:t;return[JSON.stringify({f:null===e||void 0===e?void 0:e.name,p:n}),0!==n.length&&n.some((function(e){return(0,P.F)(e)||(0,O.o)(e)}))?null:r(n)]}(e,n||[],t),a=(0,Z.Z)(o,2),c=a[0],l=a[1];l&&c!==i.current.serialized&&(i.current.serialized=c,function(e,n,t,r,o){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},a=i.transform,c=void 0===a?S:a,s=i.withParams,l=i.withParamsTransform,u=r.filter((function(e){return!(0,O.o)(e)}));E(n),setTimeout((function(){var i;e.current&&(!t||t.meta&&null!==(i=t.meta.type)&&void 0!==i&&i.isDoubleMap&&2!==u.length?n.current.subscriber=null:(n.current.isActive=!0,n.current.subscriber=t.apply(void 0,(0,C.Z)(r).concat([function(t){e.current&&n.current.isActive&&e.current&&n.current.isActive&&o(s?[r,c(t)]:c(l?[r,t]:t))}]))))}),0)}(r,i,e,l,s,t))}}),[e,t,r,n]),c}var A,D=t(20478),F=t(56262),z=t(99056),_=t(60954),I=t(85893);function M(e,n){var t=n.find((function(n){return n.value===e.UpEndpoint})),r=t&&t.value||n[0].value;return"".concat(r,"/ipfs/").concat(e.Hash,"?filename=").concat(e.Name)}var T,R=o.memo((0,w.ZP)((function(e){var n,t,r,a,s=e.file,l=e.className,d=e.uc,m=e.onDelete,v=e.type,w="public"===(void 0===v?"public":v),Z=(0,D.V)(),C=(0,o.useContext)(j.Il),P=C.api,O=C.alert,S=C.loading,E=(0,F.T)().endpoints,A=(0,o.useCallback)((0,p.Z)(f().mark((function e(){var n,t,r,o;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!s.Encrypted||0!==u().size(s.items)){e.next=28;break}if(e.prev=1,d.secret){e.next=4;break}return e.abrupt("return");case 4:return S.show(),e.next=7,g().get(M(s,E),{responseType:"arraybuffer"});case 7:return n=e.sent,console.info("res::",n),t=(new Date).getTime(),e.next=12,(0,k.n)(n.data,d.secret);case 12:if(r=e.sent,console.info("decrypt:",((new Date).getTime()-t)/1e3),r){e.next=16;break}throw"error";case 16:console.info("de:",r),o=new File([r],s.Name,{type:n.headers["content-type"]}),(0,h.saveAs)(o,s.Name),S.hide(),e.next=26;break;case 22:e.prev=22,e.t0=e.catch(1),S.hide(),O.error("Decrypt error");case 26:e.next=29;break;case 28:window.open(M(s,E),"_blank");case 29:case"end":return e.stop()}}),e,null,[[1,22]])}))),[d,s,E]),T=(0,o.useCallback)((function(){return Z(M(s,E))}),[s,E]),R=(0,x.useRouter)(),U=P&&(null===(n=P.query)||void 0===n?void 0:n.market)&&(null===(t=P.query)||void 0===t?void 0:t.market.files),H=!!U,L=N(U,[s.Hash]),B=N(null===P||void 0===P||null===(r=P.derive)||void 0===r||null===(a=r.chain)||void 0===a?void 0:a.bestNumber),G=B&&B.toNumber(),q=(0,o.useMemo)((function(){var e={status:"Loading"};if(L&&!L.isEmpty){var n=function(e){try{return JSON.parse(JSON.stringify(e))}catch(n){return{expired_at:0,reported_replica_count:0,amount:0,file_size:0,prepaid:!1}}}(L),t=n.expired_at,r=n.reported_replica_count,o=n.amount,i=n.file_size,a=n.prepaid;e.expireTime=t,e.amount=o,e.startTime=t?t-216e3:0,e.fileSize=i,e.confirmedReplicas=r,e.prepaid=a,t&&t<G&&(e.status="Expired"),r<1&&(e.status="Submitted"),t&&t>G&&r>0&&(e.status="Success")}else H&&s.PinTime-(new Date).getTime()>=72e5&&(e.status="Failed");return G||(e.status="Loading"),e}),[L,G]);return(0,I.jsxs)(i.Z.Row,{className:l,children:[(0,I.jsxs)(i.Z.Cell,{className:"fileName",children:[(0,z.lS)(s.Name),s.items&&(0,I.jsx)("span",{className:"icon cru-fo-folder"}),s.Encrypted&&(0,I.jsx)(y.Z,{trigger:(0,I.jsx)("span",{className:"icon cru-fo-key"}),content:"Encrypted",position:"top center"})]}),(0,I.jsxs)(i.Z.Cell,{textAlign:"right",children:[(0,z.lS)(s.Hash),(0,I.jsx)(y.Z,{position:"top center",content:"Copy File CID",trigger:(0,I.jsx)("span",{className:"cru-fo cru-fo-copy",onClick:function(){return Z(s.Hash)},style:{marginLeft:"1.8rem"}})})]}),(0,I.jsx)(i.Z.Cell,{textAlign:"center",style:{textTransform:"uppercase"},children:b()(Number(s.Size),{round:2})}),(0,I.jsxs)(i.Z.Cell,{textAlign:"center",children:["Loading"===q.status&&(0,I.jsx)(c.Z,{loading:!0,name:"spinner"}),"Submitted"===q.status&&q.status,"Expired"===q.status&&q.status,"Failed"===q.status&&q.status,"Success"===q.status&&"".concat(q.status," (").concat(q.confirmedReplicas," Replicas)")]}),(0,I.jsxs)(i.Z.Cell,{textAlign:"center",children:[(0,I.jsx)(y.Z,{position:"top center",content:"Copy Download Link",trigger:(0,I.jsx)("span",{className:"cru-fo cru-fo-copy",onClick:T})}),(0,I.jsx)(y.Z,{position:"top center",content:"Open",trigger:(0,I.jsx)("span",{className:"cru-fo cru-fo-external-link",style:{marginLeft:"1rem"},onClick:A})}),(0,I.jsx)(y.Z,{position:"top center",content:"Delete",trigger:(0,I.jsx)("span",{className:"cru-fo cru-fo-trash-2",style:{marginLeft:"1rem"},onClick:function(){m(s)}})})]}),w&&!s.items&&(0,I.jsx)(i.Z.Cell,{textAlign:"center",children:(0,I.jsx)(_.Z,{className:"item-share-btn",onClick:function(){var e={name:s.Name,encrypted:s.Encrypted,gateway:s.UpEndpoint},n=(0,z.pz)(JSON.stringify(e));R.push("".concat(window.location.origin,"/files/share?cid=").concat(s.Hash,"&options=").concat(n))},children:"Share"})})]})}))(A||(A=(0,r.Z)(["\n  color: var(--secend-color) !important;\n\n  .cru-fo, .icon {\n    cursor: pointer;\n    font-size: 1.3rem;\n    position: relative;\n    top: 0.3rem;\n  }\n\n  .fileName {\n    .icon {\n      margin-left: 0.6rem;\n    }\n  }\n\n  .item-share-btn {\n    padding: 5px 11px !important;\n    border-radius: 8px !important;\n  }\n\n"]))));var U=o.memo((0,w.ZP)((function(e){var n=e.className,t=e.pageCount,r=void 0===t?7:t,l=e.files,p=e.type,d=void 0===p?"public":p,f=e.onDeleteItem,m="public"===d,g=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,t=(0,o.useState)(1),r=t[0],i=t[1];return(0,o.useMemo)((function(){var t=u().chunk(e,n);return{totalPage:t.length,pageList:t[r-1]||[],setPage:i,page:r}}),[e,r])}((0,o.useMemo)((function(){return l.filter((function(e){return"public"===d?!e.Encrypted:e.Encrypted}))}),[l,d]),r),h=(0,s.MH)(),v=g.totalPage>1?2:5,b=m?v+1:v;return(0,I.jsxs)(i.Z,{basic:"very",className:n,children:[(0,I.jsx)(i.Z.Header,{className:"font-sans-semibold",children:(0,I.jsxs)(i.Z.Row,{children:[(0,I.jsx)(i.Z.HeaderCell,{children:"File Name"}),(0,I.jsx)(i.Z.HeaderCell,{width:"2",textAlign:"center",children:"File CID"}),(0,I.jsx)(i.Z.HeaderCell,{width:"2",textAlign:"center",children:"File Size"}),(0,I.jsx)(i.Z.HeaderCell,{width:"2",textAlign:"center",children:"Status"}),(0,I.jsx)(i.Z.HeaderCell,{width:"2",textAlign:"center",children:"Action"}),m&&(0,I.jsx)(i.Z.HeaderCell,{width:"2"})]})}),(0,I.jsx)(i.Z.Body,{className:"font-sans-regular",children:g.pageList.map((function(e,n){return(0,I.jsx)(R,{type:d,onDelete:f,uc:h,file:e},"files_item_".concat(n))}))}),(0,I.jsx)(i.Z.Footer,{children:(0,I.jsxs)(i.Z.Row,{children:[(0,I.jsx)(i.Z.HeaderCell,{colSpan:b,className:"btns"}),g.totalPage>1&&(0,I.jsx)(i.Z.HeaderCell,{colSpan:"3",textAlign:"right",children:(0,I.jsx)(a.Z,{totalPages:g.totalPage,activePage:g.page,firstItem:null,lastItem:null,prevItem:{content:(0,I.jsx)(c.Z,{name:"angle left"}),icon:!0},nextItem:{content:(0,I.jsx)(c.Z,{name:"angle right"}),icon:!0},secondary:!0,onPageChange:function(e,n){var t=n.activePage;return g.setPage(t)}})})]})})]})}))(T||(T=(0,r.Z)(["\n    padding: 1rem 2rem;\n    width: 100%;\n    thead {\n      font-size: 1.29rem;\n      font-weight: 600;\n\n      th:first-child {\n        padding-left: 0.57rem !important;\n      }\n\n      th {\n        border-bottom: unset !important;\n      }\n    }\n\n    tbody {\n      color: var(--secend-color);\n\n      tr, td {\n        border-top: unset !important;\n      }\n\n      tr > td:first-child {\n        padding-left: 0.57rem !important;\n      }\n\n      tr:nth-child(2n - 1) {\n        background-color: #f8f8f8;\n\n        td:first-child {\n          overflow: hidden;\n          border-top-left-radius: 0.57rem;\n          border-bottom-left-radius: 0.57rem;\n        }\n\n        td:last-child {\n          overflow: hidden;\n          border-top-right-radius: 0.57rem;\n          border-bottom-right-radius: 0.57rem;\n        }\n      }\n    }\n\n    tfoot {\n      .btns > button {\n        margin-right: 1rem !important;\n      }\n\n      th {\n        border-top: unset !important;\n      }\n\n      .btns {\n        span {\n          cursor: pointer;\n          color: #808080;\n        }\n      }\n\n      .btns > i {\n        color: var(--secend-color);\n        cursor: pointer;\n      }\n\n      .pagination > .item {\n        color: var(--secend-color);\n        padding: 0.8rem 1rem !important;\n        min-width: unset !important;\n        border-radius: 5rem !important;\n        margin: unset;\n      }\n    }\n"]))))},46176:function(e,n,t){t.d(n,{R:function(){return j}});var r,o=t(52209),i=t(80318),a=t(30266),c=t(809),s=t.n(c),l=t(94184),u=t.n(l),p=t(67294),d=t(73935),f=t(29163),m=t(65058),g=t(85893);function h(e,n){var t="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=function(e,n){if(!e)return;if("string"===typeof e)return v(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return v(e,n)}(e))||n&&e&&"number"===typeof e.length){t&&(e=t);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return a=e.done,e},e:function(e){c=!0,i=e},f:function(){try{a||null==t.return||t.return()}finally{if(c)throw i}}}}function v(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function b(e,n){return new Promise((function(t){e.file((function(e){e._webkitRelativePath="".concat(n,"/").concat(e.name),t(e)}))}))}function x(e,n){return new Promise((function(t){var r=[];e.readEntries(function(){var o=(0,a.Z)(s().mark((function o(i){var a,c,l;return s().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(!i.length){o.next=36;break}a=h(i),o.prev=3,a.s();case 5:if((c=a.n()).done){o.next=23;break}if(!(l=c.value).isFile){o.next=15;break}return o.t0=r,o.next=11,b(l,n);case 11:o.t1=o.sent,o.t0.push.call(o.t0,o.t1),o.next=21;break;case 15:if(!l.isDirectory){o.next=21;break}return o.t2=r,o.next=19,x(l.createReader(),"".concat(n,"/").concat(l.name));case 19:o.t3=o.sent,r=o.t2.concat.call(o.t2,o.t3);case 21:o.next=5;break;case 23:o.next=28;break;case 25:o.prev=25,o.t4=o.catch(3),a.e(o.t4);case 28:return o.prev=28,a.f(),o.finish(28);case 31:return o.t5=r,o.next=34,x(e,n);case 34:o.t6=o.sent,r=o.t5.concat.call(o.t5,o.t6);case 36:t(r);case 37:case"end":return o.stop()}}),o,null,[[3,25,28,31]])})));return function(e){return o.apply(this,arguments)}}())}))}function y(e){return w.apply(this,arguments)}function w(){return(w=(0,a.Z)(s().mark((function e(n){var t,r,o,i,a,c,l,u,p,d,f;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.files.length){e.next=2;break}return e.abrupt("return",null);case 2:for(t=n.items,r={files:[]},o=1===t.length,i=[],a=0;a<t.length;a++)c=t[a],(l=c.webkitGetAsEntry())&&l.isDirectory?(o&&(r.dir=l.name),i.push({reader:l.createReader(),path:l.name})):l&&(o?r.file=c.getAsFile():r.files.push(c.getAsFile()));u=0,p=i;case 8:if(!(u<p.length)){e.next=17;break}return d=p[u],e.next=12,x(d.reader,d.path);case 12:f=e.sent,r.files=r.files.concat(f);case 14:u++,e.next=8;break;case 17:return e.abrupt("return",r);case 18:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var j=p.memo((0,f.ZP)((function(e){var n=e.className,t=(0,m.O)(),r=(0,i.Z)(t,2),o=r[0],c=r[1],l=(0,p.useState)(null),f=l[0],h=l[1],v=function(){var n=(0,a.Z)(s().mark((function n(t){var r;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t.preventDefault(),n.next=3,y(t.dataTransfer);case 3:r=n.sent,console.info("fielInfo:",r),c(!1),r&&e.onDrop&&e.onDrop(r);case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();return(0,p.useEffect)((function(){var e=document.getElementById("__next");h(e)}),[]),(0,p.useEffect)((function(){if(f){var e=function(e){e.preventDefault(),c(!0)},n=function(e){"_drap_drop_frame"===e.target.id&&c(!1)};return f.addEventListener("dragenter",e),f.addEventListener("dragleave",n),function(){var t=document.getElementById("_drap_drop_frame");t&&f.removeChild(t),f.removeEventListener("dragenter",e),f.removeEventListener("dragleave",n)}}}),[f]),f?d.createPortal((0,g.jsx)("div",{id:"_drap_drop_frame",onDrop:v,onDragOver:function(e){return e.preventDefault()},className:u()(n,{show:o}),children:"Upload files to this directory"}),f):null}))(r||(r=(0,o.Z)(["\n    position: fixed;\n    width: 100vw;\n    height: 100vh;\n    z-index: 9999999;\n    left: 0;\n    top: 0;\n    background: rgba(255, 255, 255, 0.7);\n    border: 3px dashed #CCCCCC;\n    box-sizing: border-box;\n    display: none;\n    align-items: center;\n    justify-content: center;\n    font-weight: 600;\n    font-size: 36px;\n    &.show {\n        display: flex;\n    }\n"]))))},24111:function(e,n,t){t.d(n,{Z:function(){return H}});var r=t(52209),o=t(92809),i=t(30266),a=t(80318),c=t(809),s=t.n(c),l=t(9669),u=t.n(l),p=t(67294),d=t(96705),f=t(56262),m=t(345),g=t(73626),h=t(28258),v=t(37838),b=t(23499),x=t(29163),y=t(28803),w=t(65058);var j,k=t(96486),Z=t.n(k),C=t(94184),P=t.n(C),O=t(85893),S="_null",E=function(e){var n=e.expand,t=e.list,r=e.group,o=e.select,i=e.onClickItem,a=e.onClickGroup,c=e.renderGroupTitle,s=void 0===c?null:c,l=r===o.group;return(0,O.jsxs)("div",{className:"group",children:[r!==S&&(s&&s({group:r,select:o,onClickGroup:a})||(0,O.jsxs)("div",{className:P()("title",{active:l}),onClick:a,children:[r," ",(0,O.jsx)("span",{className:"dropIcon cru-fo-chevron-down"})]})),n&&t.map((function(e,n){return(0,O.jsx)("div",{className:P()("item",{active:l&&e.value===o.value}),onClick:function(n){return i(n,{group:r,value:e.value})},children:e.text},"group_item_".concat(n))}))]})};var N,A=p.memo((0,x.ZP)((function(e){var n,t=e.className,r=e.label,o=e.help,i=e.options,c=e.defaultValue,s=e.defaultGroup,l=void 0===s?S:s,u=e.renderGroupTitle,d=(0,p.useState)({value:c,group:l}),f=d[0],m=d[1],g=(0,p.useMemo)((function(){return Z().find(i,(function(e){return(e.group||S)===f.group&&e.value===f.value}))}),[i,f]),h=(0,p.useState)(l),v=h[0],b=h[1],x=(0,w.O)(),j=(0,a.Z)(x,2),k=j[0],C=j[1],N=function(e){var n=(0,p.useRef)(null);return(0,p.useEffect)((function(){var t,r=function(t){n.current&&n.current!==t.target&&!n.current.contains(t.target)&&e&&e(t)};return null===(t=document)||void 0===t||t.addEventListener("mouseup",r),function(){var e;null===(e=document)||void 0===e||e.removeEventListener("mouseup",r)}}),[n.current]),n}((function(){k&&C(!1)})),A=(0,p.useMemo)((function(){return Z().groupBy(i,(function(e){return e.group||S}))}),[i]),D=Z().keys(A);return(0,O.jsxs)("div",{className:t,onClick:function(){return C()},ref:N,children:[r&&(0,O.jsxs)("div",{className:"label font-sans-semibold",children:[r,o&&(0,O.jsx)(y.Z,{position:"top center",trigger:(0,O.jsx)("span",{className:"icon cru-fo-question"}),content:o})]}),(0,O.jsx)("span",{className:P()("dropIcon","cru-fo-chevron-down")}),(0,O.jsx)("div",{className:"text font-sans-regular",children:null!==(n=null===g||void 0===g?void 0:g.text)&&void 0!==n?n:""}),k&&(0,O.jsx)("div",{className:"options",children:D.map((function(n,t){return(0,O.jsx)(E,{group:n,renderGroupTitle:u,select:f,expand:v===n||n===S,list:A[n],onClickGroup:function(e){b(v===n?S:n),e.stopPropagation()},onClickItem:function(n,t){m(t),e.onChange(n,t)}},"group_".concat(t))}))})]})}))(j||(j=(0,r.Z)(["\n  position: relative;\n  width: 100%;\n  border-radius: 0.57rem;\n  border: 1px solid var(--line-color);\n  padding: 0.8rem 1rem;\n  cursor: pointer;\n\n  .label {\n    font-size: 1rem;\n    font-weight: 600;\n    white-space: nowrap;\n    color: var(--main-color);\n    margin-bottom: 0.6rem;\n\n    .icon {\n      font-size: 1.3rem;\n      position: relative;\n      top: 0.2rem;\n      margin-left: 0.86rem;\n      cursor: pointer;\n      color: var(--secend-color);\n    }\n  }\n\n  .dropIcon {\n    float: right;\n    position: relative;\n    top: -0.9rem;\n    right: 0;\n  }\n\n  .text {\n    font-size: 1rem;\n    color: #999999;\n  }\n\n  .options {\n    width: 100%;\n    background: white;\n    position: absolute;\n    top: calc(100% + 1px);\n    left: 0;\n    z-index: 10;\n    border-radius: 4px;\n    border: 1px solid var(--line-color);\n    box-shadow: 0 1px 5px rgba(0, 0, 0, 0.3);\n\n    .group {\n\n      .title {\n        cursor: pointer;\n        border-top: 1px solid var(--line-color);\n        padding: 0.8rem 1rem;\n        font-size: 1.2rem;\n        font-weight: 500;\n\n        &:hover, &.active {\n          background: var(--line-color);\n        }\n\n        .dropIcon {\n          float: right;\n          right: 0.6rem;\n          top: 0rem;\n        }\n      }\n\n      .item {\n        padding: 0.6rem 1.6rem;\n        cursor: pointer;\n\n        &:hover, &.active {\n          background: var(--line-color);\n        }\n      }\n    }\n  }\n"])))),D=t(60954),F=t(17082),z=t(54040);function _(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function I(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?_(Object(t),!0).forEach((function(n){(0,o.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):_(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function M(e,n){var t="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=function(e,n){if(!e)return;if("string"===typeof e)return T(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return T(e,n)}(e))||n&&e&&"number"===typeof e.length){t&&(e=t);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return a=e.done,e},e:function(e){c=!0,i=e},f:function(){try{a||null==t.return||t.return()}finally{if(c)throw i}}}}function T(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}var R=function(){},U=104857600;var H=p.memo((0,x.ZP)((function(e){var n=e.className,t=e.uc,r=e.file,o=e.onClose,c=void 0===o?R:o,l=e.onSuccess,x=void 0===l?R:l,y=e.user,j="vault"===e.type,k=(0,b.$)().t,Z=(0,f.T)(),C=Z.endpoint,P=Z.endpoints,S=Z.onChangeEndpoint,E=(0,f.q)(),N=E.onChangePinner,_=E.pinner,T=E.pins,H=(0,p.useState)(!1),L=H[0],B=H[1],G=(0,p.useMemo)((function(){if(r.file)return r.file.size>U;if(r.files){var e,n=0,t=M(r.files);try{for(t.s();!(e=t.n()).done;){n+=e.value.size}}catch(o){t.e(o)}finally{t.f()}return n>U}return!1}),[r]),q=(0,p.useState)(""),V=q[0],K=q[1],J=G?k("Do not upload files larger than 100MB!"):V,$=(0,p.useState)({progress:0,up:!1}),W=$[0],Y=$[1],Q=(0,p.useState)(null),X=Q[0],ee=Q[1],ne=j,te=(0,w.O)(),re=(0,a.Z)(te,2),oe=re[0],ie=re[1],ae=(0,p.useCallback)((function(){X&&X.cancel(),c()}),[X,c]),ce=(0,p.useCallback)((0,i.Z)(s().mark((function e(){var n,o,i,a,c,l,p,f,m,g,h,v,b,w,j,Z,P,O,S,E,N,A,D,T,R,H,L,q,V,J;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(K(""),!G&&y.account&&y.sign){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,B(!0),n=(0,d.WJ)(y),o="near"===y.wallet?y.pubKey||"":y.account,e.next=9,y.sign(o,y.account);case 9:if(i=e.sent,a="elrond"===y.wallet?i:"".concat(n,"-").concat(o,":").concat(i),c=window.btoa(a),l="Basic ".concat(c),p="Bearer ".concat(c),f=u().CancelToken.source(),ee(f),Y({progress:0,up:!0}),m=new FormData,!(g=!(!ne||!t.secret))){e.next=60;break}if(!r.file){e.next=34;break}return h=(new Date).getTime(),e.next=24,(0,F.vZ)(r.file);case 24:return v=e.sent,console.info("readFile::",((new Date).getTime()-h)/1e3),e.next=28,(0,z.P)(v,t.secret);case 28:b=e.sent,console.info("encrypted::",((new Date).getTime()-h)/1e3),w=new Blob([b],{type:r.file.type}),m.append("file",w,r.file.name),e.next=58;break;case 34:if(!r.files){e.next=58;break}j=M(r.files),e.prev=36,j.s();case 38:if((Z=j.n()).done){e.next=50;break}return P=Z.value,e.next=42,(0,F.vZ)(P);case 42:return O=e.sent,e.next=45,(0,z.P)(O,t.secret);case 45:S=e.sent,E=new Blob([S],{type:P.type}),m.append("file",E,P.webkitRelativePath);case 48:e.next=38;break;case 50:e.next=55;break;case 52:e.prev=52,e.t0=e.catch(36),j.e(e.t0);case 55:return e.prev=55,j.f(),e.finish(55);case 58:e.next=61;break;case 60:if(r.file)m.append("file",r.file,r.file.name);else if(r.files){N=M(r.files);try{for(N.s();!(A=N.n()).done;)D=A.value,m.append("file",D,D._webkitRelativePath||D.webkitRelativePath)}catch(s){N.e(s)}finally{N.f()}}case 61:return T=C.value,e.next=64,u().request({cancelToken:f.token,data:m,headers:{Authorization:l},maxContentLength:U,method:"POST",onUploadProgress:function(e){var n=e.loaded/e.total;Y({progress:Math.round(99*n),up:!0})},params:{pin:!0},url:"".concat(T,"/api/v0/add")});case 64:return"string"===typeof(R=e.sent).data?(L=R.data.replaceAll("}\n{","},{"),q=JSON.parse("[".concat(L,"]")),V=q.length-1,H=q[V],delete q[V],H.items=q):H=R.data,console.info("upResult:",R),ee(null),Y({progress:99,up:!0}),J=_.value,e.next=72,u().request({data:{cid:H.Hash,name:H.Name},headers:{Authorization:p},method:"POST",url:"".concat(J,"/psa/pins")});case 72:Y({progress:100,up:!1}),x(I(I({},H),{},{PinEndpoint:J,PinTime:(new Date).getTime(),UpEndpoint:T,Encrypted:g})),e.next=82;break;case 76:e.prev=76,e.t1=e.catch(3),Y({progress:0,up:!1}),B(!1),console.error(e.t1),K(k("Network Error,Please try to switch a Gateway."));case 82:case"end":return e.stop()}}),e,null,[[3,76],[36,52,55,58]])}))),[G,y,r,_,C,ne,x,k]);return(0,O.jsxs)(m.Z,{closeIcon:(0,O.jsx)("span",{className:"close icon cru-fo-x"}),onClose:ae,open:!0,size:"large",className:n,children:[(0,O.jsx)(m.Z.Header,{className:"font-sans-semisold",children:k(r.dir?"Upload Folder":"Upload File")}),(0,O.jsxs)(m.Z.Content,{children:[(0,O.jsxs)(g.Z.Group,{children:[(0,O.jsx)(g.Z,{fluid:!0,children:(0,O.jsxs)(g.Z.Content,{children:[(0,O.jsx)(g.Z.Header,{content:r.dir?"Folder":"File"}),(0,O.jsx)(g.Z.Description,{content:r.dir?"".concat(r.dir," (").concat(r.files.length," files)"):"".concat(r.file.name," (").concat(r.file.size," bytes)")})]})}),oe&&(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(g.Z,{fluid:!0,children:(0,O.jsx)(A,{fluid:!0,selection:!0,className:"clear-border",help:k("File streaming and wallet authentication will be processed by the chosen gateway."),disabled:L,label:k("Select a Web3 IPFS Gateway"),onChange:S,options:P,defaultGroup:C.group,defaultValue:C.value})}),(0,O.jsx)(g.Z,{fluid:!0,children:(0,O.jsx)(A,{fluid:!0,selection:!0,className:"clear-border",help:k("Your file will be pinned to IPFS for long-term storage."),disabled:0===T.length,label:k("Select a Web3 IPFS Pinner"),onChange:N,options:T,defaultValue:_.value})})]}),r.file&&(0,O.jsx)(g.Z,{fluid:!0,className:"encryption",children:(0,O.jsxs)(g.Z.Content,{children:[(0,O.jsx)(g.Z.Header,{content:"File Encryption"}),t.secret?(0,O.jsx)(g.Z.Description,{content:ne?"Yes":"File encryption is disabled in Public Mode."}):(0,O.jsx)(g.Z.Description,{content:"Please go to the 'Setting' page and set encryption key before activating this function."}),(0,O.jsx)(h.Z,{toggle:!0,defaultChecked:ne,disabled:!0})]})}),(0,O.jsx)("div",{className:"toggle-options",onClick:function(){return ie()},children:oe?"Put Away":"See More"})]}),J&&(0,O.jsx)("div",{style:{color:"orangered",padding:"1rem",whiteSpace:"pre-wrap",wordBreak:"break-all"},children:J})]}),(0,O.jsx)(m.Z.Actions,{children:(0,O.jsxs)("div",{className:"uploading",children:[W.up&&(0,O.jsx)(v.Z,{value:W.progress,total:100,active:!0,color:"orange"}),W.up&&(0,O.jsx)(D.Z,{onClick:ae,children:k("Cancel")}),!W.up&&(0,O.jsx)(D.Z,{fluid:!0,onClick:ce,disabled:G,children:k("Sign and Upload")})]})})]})}))(N||(N=(0,r.Z)(['\n  width: 51.43rem !important;\n\n  .header:nth-child(2) {\n    height: 3.93rem;\n    font-size: 1.3rem !important;\n    padding: 0 1.14rem !important;\n    font-weight: 600 !important;\n    line-height: 3.93rem !important;\n  }\n\n\n  .close.icon {\n    top: 0.5rem;\n    right: 0.6rem;\n    color: #666666;\n  }\n\n  .content {\n    padding: 1rem !important;\n  }\n\n  .ui.cards > .card {\n    margin: 0.5rem !important;\n\n    .content > .header {\n      font-size: 1rem;\n      font-weight: unset !important;\n      color: var(--main-color);\n      font-weight: 600;\n      font-family: OpenSans-SemiBold;\n    }\n\n    .content > .description {\n      font-size: 1rem;\n      color: #999999;\n      font-family: OpenSans-Regular;\n    }\n  }\n\n  .ui.cards > .card:first-child {\n    margin-top: 1rem !important;\n  }\n\n  .toggle-options {\n    cursor: pointer;\n    font-size: 10px;\n    color: #999999;\n    line-height: 14px;\n    margin-top: 8px;\n    margin-left: 1.51rem;\n  }\n\n  .actions {\n    height: 4.8rem;\n    padding: 0.5rem 1rem 0 1rem !important;\n    border-top: unset !important;\n    background: unset !important;\n\n    .button {\n      margin-left: unset !important;\n    }\n  }\n\n  .uploading {\n    height: 4rem;\n    display: flex;\n    align-items: center;\n\n    .progress {\n      margin: 0 1rem 0 0 !important;\n      vertical-align: baseline;\n      background: unset !important;\n      border: 1px solid orange;\n      flex: 1;\n\n      .bar {\n        min-width: unset !important;\n        height: 2.5rem;\n      }\n    }\n  }\n\n  .card.encryption {\n    position: relative;\n\n    .toggle {\n      position: absolute;\n      top: calc(50% - 0.75rem);\n      right: 1rem;\n\n      input[type="radio"]:checked + label:before {\n        background-color: #2ED158 !important;\n      }\n    }\n  }\n']))))},54040:function(e,n,t){t.d(n,{P:function(){return s},n:function(){return l}});var r=t(30266),o=t(809),i=t.n(o),a=function(){var e=(0,r.Z)(i().mark((function e(n){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",window.crypto.subtle.importKey("raw",n,"PBKDF2",!1,["deriveKey"]));case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),c=function(){var e=(0,r.Z)(i().mark((function e(n,t,r){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",window.crypto.subtle.deriveKey(r,n,{name:"AES-GCM",length:256},!1,t));case 1:case"end":return e.stop()}}),e)})));return function(n,t,r){return e.apply(this,arguments)}}(),s=function(){var e=(0,r.Z)(i().mark((function e(n,t){var r,o,s,l,u,p,d,f,m;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=new Uint8Array(n),o=(new TextEncoder).encode(t),s=window.crypto.getRandomValues(new Uint8Array(16)),l=window.crypto.getRandomValues(new Uint8Array(12)),e.next=7,a(o);case 7:return u=e.sent,e.next=10,c(u,["encrypt"],{name:"PBKDF2",salt:s,iterations:25e4,hash:"SHA-256"});case 10:return p=e.sent,e.next=13,window.crypto.subtle.encrypt({name:"AES-GCM",iv:l},p,r);case 13:return d=e.sent,f=new Uint8Array(d),(m=new Uint8Array(f.byteLength+s.byteLength+l.byteLength)).set(s,0),m.set(l,s.byteLength),m.set(f,s.byteLength+l.byteLength),e.abrupt("return",m);case 22:throw e.prev=22,e.t0=e.catch(0),console.error("Error encrypting file"),console.error(e.t0),e.t0;case 27:case"end":return e.stop()}}),e,null,[[0,22]])})));return function(n,t){return e.apply(this,arguments)}}(),l=function(){var e=(0,r.Z)(i().mark((function e(n,t){var r,o,s,l,u,p,d,f;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=new Uint8Array(n),o=(new TextEncoder).encode(t),s=r.slice(0,16),l=r.slice(16,28),u=r.slice(28),e.next=8,a(o);case 8:return p=e.sent,e.next=11,c(p,["decrypt"],{name:"PBKDF2",salt:s,iterations:25e4,hash:"SHA-256"});case 11:return d=e.sent,e.next=14,window.crypto.subtle.decrypt({name:"AES-GCM",iv:l},d,u);case 14:return f=e.sent,e.abrupt("return",f);case 18:return e.prev=18,e.t0=e.catch(0),console.error("Error decrypting file"),console.error(e.t0),e.abrupt("return");case 23:case"end":return e.stop()}}),e,null,[[0,18]])})));return function(n,t){return e.apply(this,arguments)}}()},17082:function(e,n,t){t.d(n,{vZ:function(){return h},hC:function(){return v},MH:function(){return b}});var r=t(92809),o=t(30266),i=t(80318),a=t(809),c=t.n(a),s=t(67294),l=t(58971),u=t.n(l),p=t(65058);function d(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function f(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?d(Object(t),!0).forEach((function(n){(0,r.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):d(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var m=t(21994).Cypher,g=new m(8),h=function(e){return new Promise((function(n,t){var r=new FileReader;r.onload=function(){r.result&&n(r.result)},r.onerror=t,r.readAsArrayBuffer(e)}))};function v(e){try{var n=e&&e.trim();if(n){var t=n.split(" ");if(1===t.length&&t[0]){var r=t[0],o=window.atob(r),i=g.phraseFromSecret(o);if(i&&i.split(" ").length>=4)return{secret:r,seeds:i}}else if(t.length>=4){var a=g.secretFromPhrase(n);if(a&&a.split("-").length>=4)return{secret:window.btoa(a),seeds:n}}}return null}catch(c){return null}}function b(){var e=(0,s.useState)({}),n=e[0],t=e[1],r=(0,p.O)(),a=(0,i.Z)(r,2),l=a[0],d=a[1];(0,s.useEffect)((function(){var e=u().get("user:crypto");e&&t(e),d(!0)}),[]);var g=(0,s.useCallback)((function(e){t(e),u().set("user:crypto",e)}),[]),h=(0,s.useCallback)((0,o.Z)(c().mark((function e(){var n,t,r,o,i;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new m(8),t=n.genMnemonics(),r=t.secret,o=t.mnemonics,i={secret:window.btoa(r),seeds:o},console.info("length:",r.length,i.secret.length),g(i),e.abrupt("return",i);case 6:case"end":return e.stop()}}),e)}))),[]);return(0,s.useMemo)((function(){return f(f({},n),{},{generate:h,set:g,init:l})}),[n,g,l,h])}},20478:function(e,n,t){t.d(n,{V:function(){return c}});var r=t(67294),o=t(12752),i=t(20640),a=t.n(i);function c(){var e=(0,r.useContext)(o.Il).alert;return(0,r.useCallback)((function(n){a()(n),e.alert({msg:"Copied",type:"success"})}),[e])}},55867:function(e,n,t){t.d(n,{Z:function(){return c}});var r=t(80318),o=t(67294),i=t(23499),a=t(12752);function c(){var e=(0,i.$)().t,n=(0,o.useContext)(a.Il).alert,t=(0,o.useState)(void 0),c=t[0],s=t[1],l=(0,o.useRef)(null),u=(0,o.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];l.current&&(l.current.webkitdirectory=e,l.current.multiple=e,l.current.click())}),[l]),p=(0,o.useCallback)((function(){return u(!1)}),[u]),d=(0,o.useCallback)((function(){return u(!0)}),[u]),f=(0,o.useCallback)((function(t){var o=t.target.files;if(o)if(o.length>2e3)n.alert({title:e("Upload"),msg:e("Please do not upload more than 2000 files"),type:"error"});else if(0!==o.length){if(t.target.webkitdirectory){if(o.length>=1){for(var i=[],a=0;a<o.length;a++)i.push(o[a]);console.info(i);var c=i[0].webkitRelativePath.split("/"),l=(0,r.Z)(c,1)[0];s({files:i,dir:l})}}else s({file:o[0]});t.target.value=""}else n.alert({title:e("Upload"),msg:e("Please select non-empty folder"),type:"error"})}),[s,n,e]);return(0,o.useMemo)((function(){return{file:c,setFile:s,inputRef:l,_onClickUpFile:p,_onClickUpFolder:d,_onInputFile:f}}),[c,l,p,d,f])}},56262:function(e,n,t){t.d(n,{T:function(){return p},q:function(){return d}});var r=t(92809),o=t(67294),i=t(75282),a=t(23499),c=t(58971),s=t.n(c);function l(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function u(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?l(Object(t),!0).forEach((function(n){(0,r.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):l(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function p(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"upload:last-gateway",n=(0,a.$)(),t=n.t,r=(0,o.useMemo)((function(){return(0,i.Dl)(t).map((function(e){var n,t;return u(u({},e),{},{text:"".concat(null!==(n=e.text)&&void 0!==n?n:""," (").concat(null!==(t=e.location)&&void 0!==t?t:"",")")})}))}),[t]),c=(0,o.useMemo)((function(){var n=s().get(e);if(n){var t=r.findIndex((function(e){return e.value===n.value}));if(t>=0)return t}return 0}),[e,r]),l=(0,o.useState)(r[c]),p=l[0],d=l[1],f=(0,o.useCallback)((function(n){d((function(t){var r="function"===typeof n?n(t):n;return s().set(e,{value:r.value}),r}))}),[]),m=(0,o.useCallback)((function(e,n){var t=n.value,o=r.find((function(e){return e.value===t}));o&&f(o)}),[r,f]);return(0,o.useMemo)((function(){return{endpoints:r,endpoint:p,setEndpoint:f,onChangeEndpoint:m}}),[r,p,f,m])}function d(){var e=(0,a.$)().t,n=(0,o.useMemo)((function(){return(0,i.qi)(e).sort((function(){return Math.random()>.5?-1:1})).map((function(e){var n;return u(u({},e),{},{text:"".concat(null!==(n=e.text)&&void 0!==n?n:"Pinner")})}))}),[e]),t=(0,o.useState)(n[0]),r=t[0],c=t[1],s=(0,o.useCallback)((function(e,t){var r=t.value,o=n.find((function(e){return e.value===r}));o&&c(o)}),[n]);return(0,o.useMemo)((function(){return{pinner:r,pins:n,setPinner:c,onChangePinner:s}}),[r,n,s])}}}]);